{"componentChunkName":"component---src-templates-post-tsx","path":"/2019/11/16/pull-to-refresh-web/","result":{"data":{"markdownRemark":{"html":"<p><em>Implementing a pull to refresh component in vanilla js for your progressive web app (PWA) it's really easy using\ncutting edge web technology (service worker, CSS new properties). Let's do it now!</em></p>\n<hr>\n<p>Some months ago\nI <a href=\"/2019/03/03/github-pages-progressive-web-app/\" title=\"pwa\">transformed my website into a Progressive Web App</a> (\nyes, the one you're reading now). By leveraging the power of service workers (and other some cool tricks that I will\ndiscuss in other posts <img class=\"emoji-icon\" alt=\"emoji-stuck_out_tongue_winking_eye\" data-icon=\"emoji-stuck_out_tongue_winking_eye\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-stuck_out_tongue_winking_eye\">) my website page load time is below 50 milliseconds <img class=\"emoji-icon\" alt=\"emoji-open_mouth\" data-icon=\"emoji-open_mouth\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-open_mouth\">.\nBut with \"the great power of service workers comes also great responsibility\" (you\nremember <a href=\"https://www.google.com/search?q=from+great+power+comes+great+responsibility\">uncle Ben quote</a>, right?), and\none of this responsibility is let the user be able to refresh all the content whenever it wants (to check new/update\nstuff). Which is a mechanism/UX pattern that every user in the world already know for this kind of functionality?\nThe <a href=\"https://en.wikipedia.org/wiki/Pull-to-refresh\">pull to refresh</a>. The choice of this pattern is also a natural\nconsequence of the fact that,\nas <a href=\"/2019/03/03/github-pages-progressive-web-app/\" title=\"pwa\">I already told you previously in another post</a>, Progressive\nWeb App are the technology that fill the gap between web and mobile native app. Unfortunately in the web development\nworld there's not yet a standard component for pull to refresh. This is way in this post I will show you how to\nimplement it from scratch without any JavaScript library/framework. I will only use vanilla JavaScript, HTML, CSS and\nthe service worker <em>message</em> capabilities in combination with the <code class=\"language-text\">MessageChannel</code> class. The pull to refresh described\nin this article is available on this site in all the blog pages (including this one, try it now!!! <img class=\"emoji-icon\" alt=\"emoji-smirk\" data-icon=\"emoji-smirk\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-smirk\">). Let's start\nfrom the implementation of the UI (HTML and CSS)</p>\n<h4>UI: HTML and CSS</h4>\n<p>You already know what we would like to achieve. The pull to refresh UI component should be something that appears at the\ntop of the page when the user scroll beyond the page borders. At some point during the drag gesture the pull to refresh\nshould stop itself from scrolling and show a loader that explain to the user that the content is reloading. Let's start\nfrom the HTML. I added to the page structure a new div that will act as the container of the pull to refresh. Inside it\nI added two other divs:</p>\n<ul>\n<li>\n<p>one is used to show a loader/activity indicator that will start to rotate as soon as the user scroll to the maximum\npull to refresh point (and as already explained above, at this point the reload of the content should have been\nstarted).</p>\n</li>\n<li>\n<p>the other one is used to show a message to the user that explaining to him/her what it is happening (this is a nice to\nhave that I added because I liked it! <img class=\"emoji-icon\" alt=\"emoji-stuck_out_tongue_winking_eye\" data-icon=\"emoji-stuck_out_tongue_winking_eye\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-stuck_out_tongue_winking_eye\">)</p>\n</li>\n</ul>\n<p>Below you can find the entire html code snippet.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pull-to-refresh<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pull-to-refresh start-pull hidden-pull<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pull-to-refresh-loader<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pull-to-refresh-loader<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pull-to-refresh-status<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pull-to-refresh-status<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    Pull down to refresh\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Let's see what I did on the CSS side. The code reported below here is written\nin <a href=\"https://en.wikipedia.org/wiki/Sass_(stylesheet_language)\">SASS</a> (the preprocessor scripting language that is\ninterpreted or compiled into Cascading Style Sheets (CSS)), but you can easily transform it in plain CSS if you need.\nFirst of all I used a new CSS property in the <code class=\"language-text\">html</code> rule: <code class=\"language-text\">overscroll-behavior-y</code>. This property let the developers\nchange the browser behaviour when the user researches the edge of the page with a scroll gesture. This is a property\nsupported by Chrome, Firefox and Opera (fuck you Safari!!! <img class=\"emoji-icon\" alt=\"emoji-rage\" data-icon=\"emoji-rage\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAUZElEQVR4Ae2bA5Aty/Luf1nVvdZ49mDz3LsP9zGubRt/27Zt27Zt2+YxNw43Z49nqbsq38q3Mt50TMyZa8W7HfFFdXRXZuX3VZYW+P/6ev/1/uv9l7w72vjQA1wREzdq4EbgyiAcEmE+KBMAWeiospyVs8AJydyZInf++nlOAvo+KcCHLvD0GHhDEXhFhBvKwGQhUApEgSDeuDPMCkmhUqitzGwluKvO/EXK/AHwn++a3lngnXZ1LjIxfYAPCvCJbeG5YwVxTGBcwMq2QmEAooAIAKiTrxlCoC/QU+gq9Aw1qa/8c4af3jjPbwGdd5oAr+cdv8YgFvv5qDLwRROBGycKmBaYBCYUJsshZiaZnFtkfG6esX2LFO0xQlEAkOuaut+lt3qR7soyWytLbK1vsVVBR2AL2FDo1ENk7qwy31Vf4JeA9A4L8MG8Y1cYpno78i3jBS+bjrAvwHSGmRIWDh9k/srrmLviGiYOHqKcmibGiIhAztAcAyGgqqSUqDY36Jw7y8rJ+1g+cQ8Xz5xjvYKNAKsZNhJ0a/6qn/gK4D/fI0Pg1y8iH32Qz2sL3zAVmVooYFZhroRDV1/D4ac+j9krjlG221D30X4PUoVoxsgLSvNSZCSCBIgl0h6Dok3V77N28gHO/Pc/cfb++1ipYE3gYg2bic2+8jW/eI7vA/TdNQnKq+eZXiz4wamCj5krYDHAPuDI5Uc5+oJXMHvlNcRco1sbSD1AGBEWcOzSsoLShKAEtGghk9OkULB24j4e/oe/4PSph1kFljKsmBA1v7BU89l/uswGoO9KAeQDFjm0L/LLk5EX7y9hUYZoCZc9/yUcefZLKUTRzRUkVURVRHA0iO/Gf6cQuo0kglpWTM1Rq3D6X/+aB//xb1gaKEsKFyrYSvztauIjf2eJs4C+8wVw8nMFvzdV8IxDBRwQ2D8zzrFXfwBz192Mri4hgw6BTBRpEJe3qtGdUSu6LYIqmYC2JpB9i6zcczsP/OnvcGG9y3mFs6NM+I+Vmje9LSIUby35186yby7yKzND8ofLEfmDsxNc+aYPZ+bIpejZBwm5JgpIgACIuvE70BviTFAIGVJnQO5tMjccZtd+wEdQ/t6vEtc6xBLOwDNQfmUY6wf88RqrgL4zBBAg7B/n+6cLXmQ9fzha2keufNUbmTlwGM49SEEmBBCEkHDLd2CwacNUIQIZu1dyVZGGbc4cOGIxwO//BnGQUAWFFyXh+1nj491E334BnPxHH+DzZiIf/X/Jt2ABOPqc5zN79Ar03ENEEiEIQXcSBZF3bJuqTSFcDAxZScO2LQaLRf/h79AW/oqPHsZ82y+e5/vekgjFWyI/XCafMh35ukUb86UwL8qBJx5i4YangJGve06+SRZk7/xG9h7/sGP4NLUNijMdkIcxWCzdB+8lP3KWuhQGqtSZrxvG/g/D5fp/9hKh2Iv8EWjPtPjOuZKpA4WwUCj7Sli8+ZmE3joyRIiBkHGrtz7T9e3IBprzgZcMY9D2GIu3PJPe+d8nVcogC33VqQq+8wi85jT0cRHeJgFecYgPmSnkhQsFzJcwG2Fm/yLjC4uwep5ATUiC7Jbu8k44cunuGeH3LoKShrGMz+/HYqvPLdEvoaNCT3nhKw7ph/zcWX4Z0LdOACd/A0xPCF86G2A+gvX8pMD04ScQqi623EkUaJCXnYSFd86lO0pAtRFsGqBVF4utf2EJi7WTYDNBd8jhBviDu2AdUMeeAgQgPuMgHzBVyLXW+3MlTBUwHm1MTCOdVUIeEFSQBlGVvfNX9sjrHXz3Hie6PSGqq5GHMVls4y2o0ijmrQybWa59xkH9gLvO8YvuMe0lgBgWoTUk+0mzYZT2UyWMF9AeIqYBob812uIKIIxKZHfSnhpvfVoo4iUKqvq4s6QqiCOwRcwD2harwFSG2RqMw+aQyyL8+hIkD0D3EiC+eJGnTAlPmylgeoiJCO0ApYB0VgjFApIGzbz3e6FJD1U0J1BDNvizGtFmNgpqtqFwP8ERkRBpTi7qfmkIE8wngmytUMooVovZYp9JsFbzNOP0m0v8G5D3EiAAca7g9ZOFxBlzVMBYhJYJEEGWHoWyGKIEX/pUE5JqqAbkegBVH3INdY3mCnHiMIKq7pbVTtQhgkpAQglFAcHabCNFC8oWGgtEIu4KumtYbKXFqqOYLfaZCozLXNLX+9E5AXk3AcQFKMYCL5kMZmip7+RLiFGwyU9PH4eJKSQGNCeMsNYVaGoMUAGBgOD3IxB23RxJc41zsSQnNJugeK/7AJEIRYmWbQgRTRntbCLVgFgIpUArj2KfNNRgnIBvAGpvTncV4HX7uHxI/pqJ4JOeObP2BEKAEAPkCraWwY0Qf+kHAYEdw2MEwdN9143QzrXeIAj4vW6nf84w6EK/05gwBYstoBR5FHO7HnEwLsbJuP3RKvftJUBcbHHzWJQJH/e0xcmLDIFzFcR7NkYY1icBilAGUME/3GwK4eUehx78TlwBnHghUMroeZUFQYlEeklJCcTFyXk7zkKUdmM+ME6LLb0ZOA7I4w6B8cANLYFhiRkXYZT6ofAMcB4ShBjg/AB+65HMyY3Ru4UxuGlf4Gn7haNTgZqRGL4ivFXnYVUFRqlcIDy8mfmvC8odq5mLPcgKV0zDBz1RONCClAWyEgQ0gMUas1AExTgYF+d0A/B7jydAMJSBy33GpxAnL048eIdGAaBdCH/xsPL992YmgzDmQ+WPH0nMtYWXXKJ81LHIE6aFfgIV9j4hqQIQVGhHeHRD+aUHEn/zWGalr+BZ1Uvwh48pM2XkE68QOpWOYkqKBAgKwWMvRPGVAeMGBAc0bsRhNgdKrPIIUSB6zwfveZFR2VfhA44Gfu0FBV92U+CVR4RLx2E+gibl908lPv2fKv7sUaXdDoQigiF66Wg+szpW12zM1nyYL/Npvq0Na8va/IBLAxZDM6aAk/fYy+AAjJsVDb6EHUOgbAlzMTQnPXxVMgh4Gdxyqg3PORj42GsLvumZJd/5/BYffX3B5dOBxVIYDOCb/rPip+/NtFojglIEpIwORzESyOpYXbMxW/Nhvsyn+bY2rC1rc7oFeJzN2MTpWezBuRgn4waUOPndBDCb8SEI0oDvRYiNBhAkggr0stBLkEW4bDbyUTe0+O6XjvFxN7fYPy4stoSfu2PAb56oaY1FT60dKAP2zupYXbMxW/Nhvsyn+c5iw2nUZvZhCWLlEOIxOnnZRgSMm3OW3YYAzpuAwck27wWCNyQBfxaQKFgPagwMRMghsJUD/7GcebivrNU2XoWfvX3A8XUo2yUUJoSjiNgze2d1rK7ZmK35MF85jHxbGxTepoQhtmMJjUx1lvh9k3XYbQiol0GFnrqTnQccQVxSkOj30hx0lsaBvgS+5t96/MXJmhKhjwwJDsta+dtHasKYD8wG7Jm9szpl220QzIf56svIt7fTbNtj8Xun2YzduKhg6DlndRCA5iVZWUVhx1bddfPbwLby1htxiCBYWbYj/34hcc8QV00FDrWF/S2BKHzhi6d5wRVtksrIroiOgD2zd1aHOLIxW/Nhvsyn+W60ZXbbvW/ljlgBmlyM216fByhAylxEITV3ZIgTNjQ2N54FRLwUKOCe1cxEEGZLoQzQivBYNzM9XXDN0TEGPYUAzShTZviu4Hzdo9PNXDIWGAtQZVivBPP5oqNALd4TCojBGVpsiqgguXEYAxKAOrfHOQ2qg77ycA3k7CIYtGEhBvG0ayA6ikAHYcp3iKUf7FoIy9nTtHABaTgNYLA6Vne8ENru0nx1EB/7uUHcbSNoAkRhR8zJudTOrcl3twyoV2uO18BAR4ZZQXec+0VoEm9sEQVakfm5SFShFCiDkLIyVgizcyXECKW6sx2boDiqY3ULt0UV82U+zTc9Bd/ygYuhINmPxKIgoALZORiXGjBueL/utgxmoD7R50SVtDsAqgwZQRWgIYLs2BoGQxghC9ddPkY0Br5K5CzM7Cu46vIJVGUkQgw7ELF3Vsfqmo24f/NlPsneTlNw8fvG+o/rmRGMwwAwTsYNqID8eAJU/7HO6W7iRC/5gSaNVFTPBkVAcOJeOohCqpQnXdbm2qdMsLyW6PQzyxuJ5718gUtmS2q2s8bJ+71QI1gdq2s2Zms+zJf5NN9EabTZjAEUGcWYPe2dg3ExTsZtLwEU6FdQrSb+te+GlTlqfp6Bp68LIQGHYFAJjC0nPv0TD3Dzm+YpntDi5Z92CR/+mgX0Qo3P4rsjBqyO1TUbszUf5st8qjRtwYA0U1N91h/FXOURB+NinIwb0Af08QSogO69Hf6pV2vuJhgkpUqQspABlW1zwRsWthGg3lIOnOrzhR93gG/50WN8/MvnaN+7RVYg4j3XhPuJkBWrazZmaz7Ml/n03m6ise6rj3tGsVYeu3EwLsYJ6ALVXh+JZaDz56vc99xZ7thM3NJJMJmgqpUyCZpBUUTUux4vG+OxEOq1jPzNBu1WoM74gacxfHZ+jaSOALmv5H9eox0gDTKaMpQCtU9+3jaS3FdG0VHqe6yD5B+Nj3CHcQI6zpG9BOhW0DvV1d9daMktmzVMDzGeoZWhyBAyiII2MtDRICVoAM34Egm4RtHIhNBwAKRMXSkIEAEVcvJez02xGgAUoDnuMwyy9TpY7CaCcTFOQPctCaBeaf23l/nHqyf11Hotl8/UMDFEq/bPJ7MiOkRWyNIYEkpzSOxc5YqWgMJ/nezybye6PLpSUQTh2ME2zzs2zpUHW1ArJoTA45BWnDRkg6Kq5KzUCQY19IfYGmK9Nugp42KcnJvSuAKw86qBjYs1G/dv6c9vJdiooDOAQQV1raQEJJcdK3eRER1BFBiRP3luwOf+6lk++xfO8Iv/sMI/3rnJ396+wQ//+RKf+FOP8R1/dIG1XqIoBMBtde82NEMaxWSxDTxWi9liNw7GBTDUAG9JAAU2gdVfOM8/LPX0f1ZrZb1SOpWL4L2kNWjy3Yb3BhgygmcJSizhX+/b4rN+8Qy3Hu/whPHAsdmCqxzH9hXMRfj9f1/n8375LI9dHBAjNH2Ai50NQM5oGsWQKt0mP4TFajFb7MbBuDgnfWsEAOibUQ82/nJNf3it0u6KqdrPWAN9FyHXHoRvubQRJ/4sRPjfU12+/veXKKrMFdNDsoUwpTCWlLGsTAOLrcBV+yKPnhvwlb9zgYsbFUEUssN9qzr5rGgaxVDVSt/JW4wWq8VssRsH4+KceGsFUB8zF/9qleP3b8lPrVewPID1vtIboj8Ay4JcJbT2mToZFBKQlRBgabXiO/98haJSpjMwyLQmAjNH2xy6YYqD104ydbhFUQp0M/sDPHp+wPf+5QopKeIikHDfGTXU2dq2GCwWi8liG8VYgcVssRsH56Jv6w8kBsAyMPE9p/MfflNLri5CeGXpq5mEPMToxFZIIjR//BsUSRGAn/7nDU4+3Me2sk972RxPed4sR49OMDcZibrd0IXVihPHO/znXy9z6z+t8Ve3dnjupW1eff0YOflXbLURTyPygxH53kDp9jNrPVjug/X+w738599zWv/QyS97E7ytAiiw6U7Gf/gR/YkvuiwfiBKeHIHge29QxsiUUgMFKAggpdDpKmcifOinHeCD3rzAE8dKeHQAt65BJ0MG/BPb6ZnIFYdavOyLLuGOj1jgl375PPd2a15dbW9H1bNN+zX1INPrKd0erHdhuadcHOJMP/+vxQqseOw+9ne/IntfCtSYFyWe6nHXDRNcFxDLVERBEAT83tkDZEVagRe9cR8vuG6M2bs65Fs30bMDtJvQKqNZnVBC1yr0kR5y/xaHQublL53m5ktKwmMD7/WRALmfqHoj8ltdWO9kjPyFIc71890/clq/7aEBp4EzLkAF8PYKgAuQAJZrON7l1mvHuTyKHM6AkwcEUSUMgYKihDrTOl2Rj/fJGxk8Y9DGWTvlEfyZCZPPD9D7exTn++RBjRE3kXIvMfBe3+oqqz1lydBXHuvl//nhIfkHujzq5JeADsA7KgA+htRF0P9d57+uG2dfO8pVOStZBQy+LOObJDKjlcJJa8pDKBhqQ3aop/gQ9UiQXI8I6yBv93pX6fSUjR6sdJXl7mjGf2gz/8W3P6Y/8EgfI37Oya8DvLMEgMYPjbaUMJxhb7uyJStTkZtSoqyz+rFZfE++vRQaYc0jYlZiZFMD/298G+FEroboZ5JNdD3FiHeH5eawXOtmLg6xbAIMtHvrGj/5dY/or3QSS07+ArD2rvqtcABmgUXHwmsXuPw1c/Fj94/JU2dKmG4JUy2YaAXGSqEsoSjFv/wJSARBIEDzDxP4IUsTpJSp02iZrSroDcvOILM5gI2BbcqwMf/ff7KSfv6PL3ISWHbiF518fpf+WhyYBuZdhLkIU596JDznKdN84FwrXD5ZwGQpjLeEiQJahVBGKAsh+Fk+AFaCH2TwMitVPUSCQa10augOlK1qiBpWBvnU/2zw2z9+Ov9Lgk1gxVN+Gd71vxZvXpPAPmDOy5n5yNRHHQxPvW6KV82XcuNEIWGsEMYKaMeREP69BmGXY6gPf4x4P0GvNpgImpcrvfOeTf7sl87l/15ObPoYXwVWvNx6T/xpquXZMOuYAaaA+Lp5Ln/mbHjaoTI8babQy9qFjJWBkQAiCBDEySsoUKuS/JOcfq299VoePFvl//r3tfxff7TMKSABTp41xwYweE/+aywA48B0AxOeIW0gPGua/TdPcuRIOxydLeTweJD5QpiJom2ApDLky3o36/JarWdO9/PDt29x+t82uABkoO893HHCDj/fv5dchZM/BFwJ3AQ8A3g+8DLgNcDrgTcCbwDebPcOu3+D37/e677MbZ/hvq5039NAwXvxVXjvzwOXAFcB1wNPAp4OPBt4LvCCHXiuv3u61zWbq9zHvPsseB+7ysZkuR84DBwFLvMevcph95f5u8Ned5/blu/rf51tzhXRy7BL2wpkR3p3je3/A/fzo8DezM1eAAAAAElFTkSuQmCC\" title=\"emoji-rage\">). By setting it's value to <code class=\"language-text\">contains</code>, we can for\nexample disable the native browser pull to refresh on Chrome and avoid the page bounce effect when the user starts to\noverflow the borders while dragging. Then I defined a property <code class=\"language-text\">pullable-content</code> that I used on the entire content of\nthe page that I want to move in parallel with the pull to refresh. The next class is <code class=\"language-text\">pull-to-refresh</code> and contains all\nthe styles needed to layout the pull to refresh in all its states. As you can see I defined all the animation I needed\nfor this UI component here except for the translation applied while dragging that will be computed on the JavaScript\nside (because this are simple animation\nand <a href=\"https://medium.com/outsystems-experts/how-to-achieve-60-fps-animations-with-css3-db7b98610108\">CSS is performant enough for this kind of animations</a>)\n. Last but not least I defined 2 classes to reset the pull to refresh layout status when the pull to refresh is started\nor has reached the end and starts the refresh of the content (they will be applied, like other contained here, with\nJavaScript DOM API).</p>\n<div class=\"gatsby-highlight\" data-language=\"scss\"><pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token selector\">html </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">overscroll-behavior-y</span><span class=\"token punctuation\">:</span> contain<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.pullable-content </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> 10px\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.pull-to-refresh </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$general-background</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> 55px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">box-shadow</span><span class=\"token punctuation\">:</span> inset 0px -2px 6px 1px <span class=\"token variable\">$divider-color</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">flex-direction</span><span class=\"token punctuation\">:</span> column<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">justify-content</span><span class=\"token punctuation\">:</span> flex-end<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">align-items</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n\n  <span class=\"token selector\"><span class=\"token parent important\">&amp;</span>.visible-pull </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">visibility</span><span class=\"token punctuation\">:</span> visible<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\"><span class=\"token parent important\">&amp;</span>.hidden-pull </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">visibility</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.pull-to-refresh-status </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> bold<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 14px<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token selector\">.pull-to-refresh-loader </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 3px solid <span class=\"token variable\">$primary-color-dark</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-top</span><span class=\"token punctuation\">:</span> 3px solid <span class=\"token variable\">$primary-color-light</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 30px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 30px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n\n    <span class=\"token selector\"><span class=\"token parent important\">&amp;</span>.animate </span><span class=\"token punctuation\">{</span>\n      <span class=\"token property\">animation</span><span class=\"token punctuation\">:</span> spin 1.25s linear infinite<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token atrule\"><span class=\"token rule\">@keyframes</span> spin</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token selector\">0% </span><span class=\"token punctuation\">{</span>\n        <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>0deg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token selector\">100% </span><span class=\"token punctuation\">{</span>\n        <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>360deg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.start-pull </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translateY</span><span class=\"token punctuation\">(</span>-100px<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.end-pull </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translateY</span><span class=\"token punctuation\">(</span>-100px<span class=\"token punctuation\">)</span> <span class=\"token important\">!important</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transition</span><span class=\"token punctuation\">:</span> 0.4s ease-in-out<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>JavaScript</h4>\n<p>On the JavaScript side, I wrote the the pull to refresh widget as a standalone widget that export one single\nfunction <code class=\"language-text\">pullToRefresh()</code>. The first thing that this widget does is to check the browser support for service worker.\nThen it checks for some HTML component that are needed by the widget by using the <code class=\"language-text\">invariant</code> function. This HTML\ncomponents are the loader, the loader message status and the content to be refreshed. The widget will throw an error if\none of this HTML component is not present on the page where the it is instantiated.<br>\nThen 3 new listener are attached to the 3 touches event on the entire document: <code class=\"language-text\">'touchstart'</code>, <code class=\"language-text\">'touchmove'</code>\nand <code class=\"language-text\">'touchend'</code>. In the <code class=\"language-text\">'touchstart'</code> event I get the starting touches coordinates and I prepare the pull to refresh\nDOM by adding the CSS classes needed with the function <code class=\"language-text\">preparePullToRefreshToStart()</code>. The <code class=\"language-text\">touchemove</code> is the core of\nthe widget. In this event I try to understand if the user is doing a drag gesture by using the\nfunction <code class=\"language-text\">isDraggingForPullToRefresh()</code> that does some checks using the <code class=\"language-text\">window.scrollY</code> property and the <code class=\"language-text\">yMovement</code>\ncalculated by doing the difference between the gesture starting coordinates (that I get from the <code class=\"language-text\">touchstart</code> event) and\nthe current touches coordinates.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> dragCurrentPoint <span class=\"token operator\">=</span> <span class=\"token function\">getTouchesCoordinatesFrom</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> yMovement <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>dragStartPoint<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> dragCurrentPoint<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> decelerationFactor</code></pre></div>\n<p>When I detect a drag gesture (so as we said above <code class=\"language-text\">isDraggingForPullToRefresh() == true</code>) I start to check if the pull\nto refresh is completed with the function <code class=\"language-text\">isPullToRefreshDragCompleted()</code>, that does a check to understand if the total\ndrag gesture movement is equal to pull to refresh contained DOM element. If this function return false, then the pull to\nrefresh DOM is updated by the function <code class=\"language-text\">dragUpdate()</code>, that applies some CSS transform that translate the pull to\nrefresh into the viewport to make it more and more visible (and increase the visibility of the loader that it is still\nstop).<br>\nWhen <code class=\"language-text\">isPullToRefreshDragCompleted()</code> is <code class=\"language-text\">true</code>, the user reached the end of the pull to refresh drag gesture and the\nrefresh of the content is started. How do I refresh the content? I send a message to the service worker using the\nfunction <code class=\"language-text\">sendMessageToServiceWorker</code> to refresh the content. When the service worker answers that the refresh of the\ncontent is completed we update the pull to refresh status with the message 'Refresh completed' and we close it using the\nfunctions <code class=\"language-text\">setRefreshStatusCompleted()</code> and <code class=\"language-text\">closePullToRefresh()</code>. In particular the <code class=\"language-text\">closePullToRefresh()</code> function\nlaunches a CSS transform transition animation to close the pull to refresh. To reload the content of the page when the\nanimation is completed I defined a <code class=\"language-text\">transitionend</code> listener attached to the <code class=\"language-text\">pullToRefreshElement</code> container element (\nthe one that is animated) that launches a <code class=\"language-text\">window.location.reload()</code> to reload the page and show the new fresh content.\nIn all this steps I keep track that the refresh phases completed correctly by setting some status flag in a status\nrepository that I create with the function <code class=\"language-text\">createPullToRefreshStatusRepository()</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//...other code...</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createPullToRefreshStatusRepository</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">refreshStarted</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">refreshCompleted</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">startRefresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refreshStarted <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">completeRefresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refreshCompleted <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//...other code...</span></code></pre></div>\n<p>As I said before, each flag is updated when the correct phase is completed (e.g. a touch listener is launched or the\nservice worker warn us that the refresh is completed).<br>\nBelow you can find the complete pull to refresh widget code discussed above. Inside it there are also some utilities\nclasses that I use on my website to increase the compatibility on older browser (in this case used only to keep\nconsistencies in the entire website JavaScript code case because a modern browser with Service Worker support is\nrequired).</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> sendMessageToServiceWorker <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../common/service-worker'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> addCssClass<span class=\"token punctuation\">,</span> removeCssClass <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../common/css-class'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> getTrackingClientId <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../common/tracking'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">pullToRefresh</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">trackingCategory</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token string\">'serviceWorker'</span> <span class=\"token keyword\">in</span> navigator<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> pullToRefreshElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#pull-to-refresh'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> pullToRefreshStatusElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#pull-to-refresh-status'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> pullToRefreshLoaderElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#pull-to-refresh-loader'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> pullableContent <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.pullable-content'</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">invariant</span><span class=\"token punctuation\">(</span>pullToRefreshElement <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">HTMLElement</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">invariant</span><span class=\"token punctuation\">(</span>pullToRefreshStatusElement <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">HTMLElement</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">invariant</span><span class=\"token punctuation\">(</span>pullToRefreshLoaderElement <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">HTMLElement</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">invariant</span><span class=\"token punctuation\">(</span>pullableContent <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">HTMLElement</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> pullToRefreshElementHeight <span class=\"token operator\">=</span> pullToRefreshElement<span class=\"token punctuation\">.</span>offsetHeight\n  <span class=\"token keyword\">const</span> pullToRefreshStatusRepository <span class=\"token operator\">=</span> <span class=\"token function\">createPullToRefreshStatusRepository</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> decelerationFactor <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span>\n  <span class=\"token keyword\">let</span> dragStartPoint <span class=\"token operator\">=</span> <span class=\"token function\">createTouchCoordinates</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dragUpdate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">dragMovement<span class=\"token punctuation\">,</span> pullToRefreshLoaderOpacity</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    pullToRefreshElement<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translateY(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dragMovement<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span>\n    pullableContent<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translateY(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dragMovement<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span>\n    pullToRefreshLoaderElement<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>opacity <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pullToRefreshLoaderOpacity<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isDraggingForPullToRefresh</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">yMovement</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> yMovement <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">closePullToRefresh</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">addCssClass</span><span class=\"token punctuation\">(</span>pullToRefreshElement<span class=\"token punctuation\">,</span> <span class=\"token string\">'end-pull'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">addCssClass</span><span class=\"token punctuation\">(</span>pullableContent<span class=\"token punctuation\">,</span> <span class=\"token string\">'end-pull'</span><span class=\"token punctuation\">)</span>\n    pullToRefreshElement<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\n    pullableContent<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\n    pullToRefreshLoaderElement<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>opacity <span class=\"token operator\">=</span> <span class=\"token string\">'0'</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">preparePullToRefreshToStart</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">addCssClass</span><span class=\"token punctuation\">(</span>pullToRefreshElement<span class=\"token punctuation\">,</span> <span class=\"token string\">'start-pull'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">removeCssClass</span><span class=\"token punctuation\">(</span>pullToRefreshElement<span class=\"token punctuation\">,</span> <span class=\"token string\">'end-pull'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">addCssClass</span><span class=\"token punctuation\">(</span>pullableContent<span class=\"token punctuation\">,</span> <span class=\"token string\">'start-pull'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">removeCssClass</span><span class=\"token punctuation\">(</span>pullableContent<span class=\"token punctuation\">,</span> <span class=\"token string\">'end-pull'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">showPullToRefresh</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">addCssClass</span><span class=\"token punctuation\">(</span>pullToRefreshElement<span class=\"token punctuation\">,</span> <span class=\"token string\">'visible-pull'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">removeCssClass</span><span class=\"token punctuation\">(</span>pullToRefreshElement<span class=\"token punctuation\">,</span> <span class=\"token string\">'hidden-pull'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setRefreshingStatus</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    pullToRefreshStatusElement<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'Refreshing'</span>\n    <span class=\"token function\">addCssClass</span><span class=\"token punctuation\">(</span>pullToRefreshLoaderElement<span class=\"token punctuation\">,</span> <span class=\"token string\">'animate'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isPullToRefreshDragCompleted</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">yAbsoluteMovement</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> yAbsoluteMovement <span class=\"token operator\">>=</span> pullToRefreshElementHeight\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setRefreshStatusCompleted</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    pullToRefreshStatusElement<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'Refresh completed'</span>\n    <span class=\"token function\">addCssClass</span><span class=\"token punctuation\">(</span>pullToRefreshElement<span class=\"token punctuation\">,</span> <span class=\"token string\">'hidden-pull'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">removeCssClass</span><span class=\"token punctuation\">(</span>pullToRefreshElement<span class=\"token punctuation\">,</span> <span class=\"token string\">'visible-pull'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">resetPullToRefreshStatus</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    pullToRefreshStatusElement<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'Pull down to refresh'</span>\n    <span class=\"token function\">removeCssClass</span><span class=\"token punctuation\">(</span>pullToRefreshLoaderElement<span class=\"token punctuation\">,</span> <span class=\"token string\">'animate'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'touchstart'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    dragStartPoint <span class=\"token operator\">=</span> <span class=\"token function\">getTouchesCoordinatesFrom</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">preparePullToRefreshToStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">passive</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'touchmove'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> dragCurrentPoint <span class=\"token operator\">=</span> <span class=\"token function\">getTouchesCoordinatesFrom</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> yMovement <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>dragStartPoint<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> dragCurrentPoint<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> decelerationFactor\n    <span class=\"token keyword\">const</span> yAbsoluteMovement <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>yMovement<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isDraggingForPullToRefresh</span><span class=\"token punctuation\">(</span>yMovement<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>pullToRefreshStatusRepository<span class=\"token punctuation\">.</span>refreshStarted<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      event<span class=\"token punctuation\">.</span><span class=\"token function\">stopPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token function\">showPullToRefresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isPullToRefreshDragCompleted</span><span class=\"token punctuation\">(</span>yAbsoluteMovement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        pullToRefreshStatusRepository<span class=\"token punctuation\">.</span><span class=\"token function\">startRefresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">dragUpdate</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setRefreshingStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">sendMessageToServiceWorker</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'refresh'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">clientId</span><span class=\"token operator\">:</span> <span class=\"token function\">getTrackingClientId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          trackingCategory\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          pullToRefreshStatusRepository<span class=\"token punctuation\">.</span><span class=\"token function\">completeRefresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n          <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">setRefreshStatusCompleted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token function\">closePullToRefresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1500</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">dragUpdate</span><span class=\"token punctuation\">(</span>yAbsoluteMovement <span class=\"token operator\">-</span> pullToRefreshElementHeight<span class=\"token punctuation\">,</span> yAbsoluteMovement <span class=\"token operator\">/</span> pullToRefreshElementHeight<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">passive</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'touchend'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>pullToRefreshStatusRepository<span class=\"token punctuation\">.</span>refreshStarted<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">closePullToRefresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">passive</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  pullToRefreshElement<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'transitionend'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pullToRefreshStatusRepository<span class=\"token punctuation\">.</span>refreshCompleted<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span><span class=\"token function\">reload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">resetPullToRefreshStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createTouchCoordinates</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createPullToRefreshStatusRepository</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">refreshStarted</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">refreshCompleted</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">startRefresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refreshStarted <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">completeRefresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refreshCompleted <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">invariant</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">statement</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>statement<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Pull to refresh invariant failed'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getTouchesCoordinatesFrom</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">createTouchCoordinates</span><span class=\"token punctuation\">(</span>\n    event<span class=\"token punctuation\">.</span>targetTouches<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>screenX<span class=\"token punctuation\">,</span>\n    event<span class=\"token punctuation\">.</span>targetTouches<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>screenY\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> tryToActivatePullToRefresh <span class=\"token punctuation\">}</span></code></pre></div>\n<p>The widget above is instantiated the blog main js file <code class=\"language-text\">index.blog.js</code> file. Below you can find the startup code that I\nplaced inside a <code class=\"language-text\">load</code> event listener (that on my website code does also other things).</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> pullToRefresh <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./blog/pull-to-refresh'</span>\n\n<span class=\"token comment\">//...other code...</span>\n\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'load'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">//...other code...</span>\n  <span class=\"token function\">pullToRefresh</span><span class=\"token punctuation\">(</span>trackingCategory<span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">//...other code...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4>Service Worker</h4>\n<p>One thing I didn't show in detail is how we can achieve the communication between the JavaScript code that runs on the\nweb page and the service worker. In the code above I shown you the function <code class=\"language-text\">sendMessageToServiceWorker()</code>. What does\nthis function do? Inside it I create a new <code class=\"language-text\">MessageChannel</code> and bind its <code class=\"language-text\">port1.onmessage</code> listener to a new one created\nad-hoc to return the response that this function will receive from the service worker. The <code class=\"language-text\">port2</code> of\nthe <code class=\"language-text\">MessageChannel</code> is sent to the service worker along with the <code class=\"language-text\">message</code> string label using the\nfunction <code class=\"language-text\">postMessage</code> on the service worker container <code class=\"language-text\">controller</code> property. This property contains the current\ninstance of the service worker. If you already worker in the past on some IFrame communication, <code class=\"language-text\">postMessage</code> is not\nsomething new (it's the same function actually <img class=\"emoji-icon\" alt=\"emoji-smirk\" data-icon=\"emoji-smirk\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-smirk\">).</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">sendMessageToServiceWorker</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">message</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> messageChannel <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MessageChannel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    messageChannel<span class=\"token punctuation\">.</span>port1<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onmessage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>navigator<span class=\"token punctuation\">.</span>serviceWorker <span class=\"token operator\">&amp;&amp;</span> navigator<span class=\"token punctuation\">.</span>serviceWorker<span class=\"token punctuation\">.</span>controller<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      navigator<span class=\"token punctuation\">.</span>serviceWorker<span class=\"token punctuation\">.</span>controller<span class=\"token punctuation\">.</span><span class=\"token function\">postMessage</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>messageChannel<span class=\"token punctuation\">.</span>port2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then In the service worker I added a new <code class=\"language-text\">message</code> listener that receive all the messages sent with the function above.\nAt the moment I have only the <code class=\"language-text\">refresh</code> message. This is why all the code to manage this message is contained inside\nit (just to explain the reason to\nthe <a href=\"https://twitter.com/dan_abramov/status/1190762799338790913\">clean code fluffy evangelist</a> <img class=\"emoji-icon\" alt=\"emoji-sweat_smile\" data-icon=\"emoji-sweat_smile\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-sweat_smile\">). In the\nlistener I check for the correctness of the event label, and then I start to clean up the cache from all the assets and\npages of the blog with (this is why for example the <code class=\"language-text\">createDeleteOperationsForImages</code> checks that the url contains\nthe <code class=\"language-text\">posts</code> path, in order to avoid the deletion of home images). This delete cache function are all execute in\na <code class=\"language-text\">Promise.all</code> call. When this function completes the execution of all the delete operation, I\ncall <code class=\"language-text\">sendRefreshCompletedMessageToClient()</code> to warn the original JavaScript code (the <code class=\"language-text\">port1.onmessage</code> listener we saw\nabove) that the refresh operation has been completed.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//...other service worker code...</span>\n\nself<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'message'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isARefresh</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>message <span class=\"token operator\">===</span> <span class=\"token string\">'refresh'</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createDeleteOperationFor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">url<span class=\"token punctuation\">,</span> siteCache<span class=\"token punctuation\">,</span> requests</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> siteCache\n    <span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>requests\n      <span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">request</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> request<span class=\"token punctuation\">.</span>url <span class=\"token operator\">===</span> url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createDeleteOperationsForImages</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">siteCache<span class=\"token punctuation\">,</span> requests</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> requests\n    <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">request</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> request<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">.</span><span class=\"token function\">endsWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.jpg'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> request<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'posts'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">request</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> siteCache<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">sendRefreshCompletedMessageToClient</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> event<span class=\"token punctuation\">.</span>ports<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">postMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">refreshCompleted</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isARefresh</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    caches<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>siteCacheName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">siteCache</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      siteCache<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requests</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> deleteRequestToBeRefreshed <span class=\"token operator\">=</span> <span class=\"token function\">createDeleteOperationFor</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">,</span> siteCache<span class=\"token punctuation\">,</span> requests<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">const</span> deleteRequestsForImagesToBeRefreshed <span class=\"token operator\">=</span> <span class=\"token function\">createDeleteOperationsForImages</span><span class=\"token punctuation\">(</span>siteCache<span class=\"token punctuation\">,</span> requests<span class=\"token punctuation\">)</span>\n        Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n          deleteRequestToBeRefreshed<span class=\"token punctuation\">,</span>\n          <span class=\"token operator\">...</span>deleteRequestsForImagesToBeRefreshed<span class=\"token punctuation\">,</span>\n          <span class=\"token function\">sendAnalyticsEvent</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>clientId<span class=\"token punctuation\">,</span> <span class=\"token string\">'{{ site.data.tracking.action.pull_to_refresh }}'</span><span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>trackingCategory<span class=\"token punctuation\">,</span> <span class=\"token string\">'{{ site.data.tracking.label.body }}'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">sendRefreshCompletedMessageToClient</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">sendRefreshCompletedMessageToClient</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">//...other service worker code...</span></code></pre></div>\n<h4>Conclusion</h4>\n<p>All the code above is everything needed to implement your own pull to refresh widget. As you can see, it is not too\ndifficult to create a pull to refresh UX that almost matches the experience given by a mobile native app. Service\nWorkers, modern CSS and HTML and vanilla JavaScript let you create beautiful native alike experience that can make you\nuser fall in love with you web product before they install your app <img class=\"emoji-icon\" alt=\"emoji-heart\" data-icon=\"emoji-heart\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-heart\"> (or maybe they will just stick to your site\nbecause they hate mobile apps or because you hate mobile apps and you don't want to develop a new one <img class=\"emoji-icon\" alt=\"emoji-smiley\" data-icon=\"emoji-smiley\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-smiley\">).</p>","frontmatter":{"title":"Implement a pull to refresh component for you web application","comments":true,"authors":["fabrizio_duroni"],"tags":["pwa","web development","javascript"],"date":"16 Nov 2019","description":"Implementing a pull to refresh component in vanilla js for your progressive web app (PWA) it's really easy. Let's do it now!","math":false,"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#38d8f8","images":{"fallback":{"src":"/static/2403162d5a2719b2006cb277a8ffd717/e257f/pull-to-refresh.jpg","srcSet":"/static/2403162d5a2719b2006cb277a8ffd717/e38d1/pull-to-refresh.jpg 750w,\n/static/2403162d5a2719b2006cb277a8ffd717/9234d/pull-to-refresh.jpg 1080w,\n/static/2403162d5a2719b2006cb277a8ffd717/32f76/pull-to-refresh.jpg 1366w,\n/static/2403162d5a2719b2006cb277a8ffd717/e257f/pull-to-refresh.jpg 1500w","sizes":"100vw"},"sources":[{"srcSet":"/static/2403162d5a2719b2006cb277a8ffd717/2ccd6/pull-to-refresh.webp 750w,\n/static/2403162d5a2719b2006cb277a8ffd717/cad7b/pull-to-refresh.webp 1080w,\n/static/2403162d5a2719b2006cb277a8ffd717/a7696/pull-to-refresh.webp 1366w,\n/static/2403162d5a2719b2006cb277a8ffd717/dac10/pull-to-refresh.webp 1500w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5333333333333333}}}},"fields":{"slug":"/2019/11/16/pull-to-refresh-web/","readingTime":{"text":"13 min read"}}},"site":{"siteMetadata":{"author":"Fabrizio Duroni"}}},"pageContext":{"slug":"/2019/11/16/pull-to-refresh-web/"}},"staticQueryHashes":["3076394108","379746230","4028829600","630498219"]}