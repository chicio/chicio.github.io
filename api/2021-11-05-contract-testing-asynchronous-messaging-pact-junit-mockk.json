{"title":"Contract testing asynchronous messaging with Pact and MockK","description":"In the last weeks I worked with my colleague Felice Giovinazzo on a new feature for the refund  process. Let‚Äôs see how we used pact to test a message-based interaction between two microservices with Pact","date":"05 Nov 2021","readingTime":"14 min read","featuredImageUrl":"https://www.fabrizioduroni.it/static/dd3ff75371a3dc43c74c7eca205a8ad1/pact-mockk-message.jpg","authors":[{"name":"Fabrizio Duroni","url":"https://www.linkedin.com/in/fabrizio-duroni/","imageUrl":"https://www.fabrizioduroni.it/static/04f0a7ef38819e8782b8b6f55b44fd95/fabrizio-duroni.jpg"},{"name":"Felice Giovinazzo","url":"https://www.linkedin.com/in/felice-giovinazzo-17277b55/","imageUrl":"https://www.fabrizioduroni.it/static/e34f52c6d46c24b0dd70368524e25a77/felice-giovinazzo.jpg"},{"name":"Stefano Varesi","url":"https://www.linkedin.com/in/stefanovaresi/","imageUrl":"https://www.fabrizioduroni.it/static/f6aef0f2d94a2b0b66b4f39c81968c8c/stefano-varesi.jpg"}],"tags":["test driven development","contract test","pact","backend"],"math":false,"content":"<p><em>In the last weeks I worked with my colleague Felice Giovinazzo on a new feature for the refund\nprocess. Let‚Äôs see how we used pact to test a message-based interaction between two microservices with Pact</em></p>\n<hr>\n<p>In the last weeks I worked with my colleague <a href=\"https://www.linkedin.com/in/felice-giovinazzo-17277b55/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Felice Giovinazzo</a>\non a new feature for the refund process (as may already know from some of\n<a href=\"/2020/12/23/rest-template-webclient-spring-boot/\" title=\"kotlin spring boot\">my previous posts</a> in the last 2 years I\nworked mainly on backend applications). In this new feature we have a messaging-based communication between\nmicroservices. The messaging system used is <a href=\"https://www.rabbitmq.com\" title=\"rabbitmq\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">RabbitMQ</a>. In\n<a href=\"https://www.lastminute.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">lastminute.com group</a> we are already using <a href=\"https://docs.pact.io\" title=\"pact doc\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Pact</a> to\nimplement contract testing for the classic RESTful interaction between microservices. What is contract testing?\nLet‚Äôs have a look at the definition from the Pact website.</p>\n<blockquote>\n<p>Contract tests assert that inter-application messages conform to a shared understanding that is documented in a\ncontract. Without contract testing, the only way to ensure that applications will work correctly together is by\nusing expensive and brittle integration tests.<br>\nDo you <a href=\"https://dius.com.au/2014/05/19/simplifying-micro-service-testing-with-pacts/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">set your house on fire to test your smoke alarm?</a>\nNo, you test the contract it holds with your ears by using the testing button. Pact provides that testing button\nfor your code, allowing you to safely confirm that your applications will work together without having to deploy\nthe world first.</p>\n</blockquote>\n<p>So contract testing is a way to ensure that two application communicate correctly by adhering to a contract that\ndescribe the API or the message exchanged between them. Cool, isn‚Äôt it? üòè</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a1346f525e77360f688dde91a9870090/6d14c/pact-contract-testing.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.43859649122807%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd2aRQw//8QAGBAAAgMAAAAAAAAAAAAAAAAAAAEQIUH/2gAIAQEAAQUChDo0/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAEBEg/9oACAEBAAY/AoQ//8QAGxAAAgIDAQAAAAAAAAAAAAAAAAExQRARIWH/2gAIAQEAAT8hT7JW2QksPTH/2gAMAwEAAgADAAAAEEDP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAQEAAwEBAAAAAAAAAAAAAREAIUFxMYH/2gAIAQEAAT8QVgbz2GQhDl+zB7X8ONMBnhdQCXkwQhv/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"contract testing pact\"\n        title=\"Pact contract testing\"\n        src=\"/static/a1346f525e77360f688dde91a9870090/0470c/pact-contract-testing.jpg\"\n        srcset=\"/static/a1346f525e77360f688dde91a9870090/6c669/pact-contract-testing.jpg 285w,\n/static/a1346f525e77360f688dde91a9870090/882a4/pact-contract-testing.jpg 570w,\n/static/a1346f525e77360f688dde91a9870090/0470c/pact-contract-testing.jpg 1140w,\n/static/a1346f525e77360f688dde91a9870090/01a9b/pact-contract-testing.jpg 1710w,\n/static/a1346f525e77360f688dde91a9870090/6d14c/pact-contract-testing.jpg 1898w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Pact contract testing</figcaption>\n  </figure></p>\n<p>In this post I will show you how me and Felice tested a messaging interaction between two microservices using Pact with\nthe help of <a href=\"https://www.linkedin.com/in/stefanovaresi/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Stefano Varesi</a>, a senior software engineer that works in\nthe lastminute.com team that introduced Pact in the company. How does it work? Pact is a <a href=\"https://martinfowler.com/articles/consumerDrivenContracts.html\" title=\"consumer driven contract testing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">consumer driven contract testing</a>: it is responsibility of the consumer to generate the contract that will be used by\nthe provider to verify its correctness. As you can see from the image above, there are three key actors in pact test:</p>\n<ul>\n<li>the consumer of an API</li>\n<li>the provider of an API</li>\n<li>a pact broker, an application used to share contracts and verification results between consumers and providers.</li>\n</ul>\n<p>The workflow to write a consumer driven contract test is the following one:</p>\n<ul>\n<li>write the contract test on the consumer</li>\n<li>publish the contract obtained by executing the contract test on the consumer side</li>\n<li>write the provider test using the contract published before as a proof of correctness of your API</li>\n</ul>\n<p>The same flow is applied in case of a message/event driven architecture: start with the test of the message consumer,\npublish the contract and then write the message producer test. Now that everything is clear we can start to write our\nfirst Pact test for message exchange between two microservices. Let‚Äôs go!!! üöÄ</p>\n<h4>Setup</h4>\n<p>Our example application is composed by two microservices:</p>\n<ul>\n<li><code class=\"language-text\">RefundService</code>, a spring boot web application that manages everything related to the refund of an order of a\ncustomer. In our example this application will be the <em>producer</em> of a <em>refund ready message</em>.</li>\n<li><code class=\"language-text\">AccountService</code>, a spring boot web application that manages everything related to the customer account. In our\nexample this application will be the <em>consumer</em> of a <em>refund ready message</em> that came from the <code class=\"language-text\">RefundService</code>\napplication.</li>\n</ul>\n<p>Let's see the dependencies need by these applications. Both of them will depend on these libraries/languages:</p>\n<ul>\n<li>spring boot, kotlin, <a href=\"https://arrow-kt.io\" title=\"arrow kotlin\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">arrow</a> (kotlin functional programming library)\nproduction code</li>\n<li>spring boot starter test, <a href=\"https://kotest.io\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">kotest</a> and <a href=\"https://mockk.io\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">mockk</a> for the testing part</li>\n</ul>\n<p>For writing our Pact test:</p>\n<ul>\n<li><code class=\"language-text\">RefundService</code> will have the dependency needed in order to write the pact provider\ntest <code class=\"language-text\">au.com. dius.pact.provider.junit5</code></li>\n<li><code class=\"language-text\">AccountService</code> will have the dependency needed in order to write the pact consumer\ntest <code class=\"language-text\">au.com.dius.pact. consumer.junit5</code></li>\n</ul>\n<p>In the <code class=\"language-text\">AccountService</code> application, so on the consumer side, we need also to set up the maven\nplugin <code class=\"language-text\">au.com.dius. pact.provider.maven</code> that will let us publish our contracts on the pact broker. Below you can find\nthe maven pom.xml of the applications.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>project</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://maven.apache.org/POM/4.0.0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span>\n         <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>modelVersion</span><span class=\"token punctuation\">></span></span>4.0.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>modelVersion</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>parent</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-parent<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.5.6<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>relativePath</span><span class=\"token punctuation\">/></span></span> <span class=\"token comment\">&lt;!-- lookup parent from repository --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>parent</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>it.chicio.pact.provider<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>RefundService<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>0.0.1-SNAPSHOT<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>RefundService<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>description</span><span class=\"token punctuation\">></span></span>Message provider example<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>description</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>properties</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>java.version</span><span class=\"token punctuation\">></span></span>11<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>java.version</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>kotlin.version</span><span class=\"token punctuation\">></span></span>1.5.31<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>kotlin.version</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arrow.version</span><span class=\"token punctuation\">></span></span>1.0.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>arrow.version</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pact.version</span><span class=\"token punctuation\">></span></span>4.2.14<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pact.version</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>properties</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.jetbrains.kotlin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>kotlin-reflect<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.jetbrains.kotlin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>kotlin-stdlib-jdk8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>com.fasterxml.jackson.module<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>jackson-module-kotlin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.13.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token comment\">&lt;!-- arrow --></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>io.arrow-kt<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>arrow-core<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>${arrow.version}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token comment\">&lt;!-- base test dependencies --></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">></span></span>test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>io.kotest<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>kotest-runner-junit5-jvm<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>4.6.3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">></span></span>test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>io.mockk<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>mockk<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.12.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">></span></span>test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token comment\">&lt;!-- pact provider dependency --></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>au.com.dius.pact.provider<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>junit5<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>4.2.14<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">></span></span>test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>build</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>sourceDirectory</span><span class=\"token punctuation\">></span></span>${project.basedir}/src/main/kotlin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>sourceDirectory</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>testSourceDirectory</span><span class=\"token punctuation\">></span></span>${project.basedir}/src/test/kotlin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>testSourceDirectory</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugins</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugin</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-maven-plugin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugin</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugin</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.jetbrains.kotlin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>kotlin-maven-plugin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>args</span><span class=\"token punctuation\">></span></span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span><span class=\"token punctuation\">></span></span>-Xjsr305=strict<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>arg</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>args</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>compilerPlugins</span><span class=\"token punctuation\">></span></span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugin</span><span class=\"token punctuation\">></span></span>spring<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugin</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>compilerPlugins</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.jetbrains.kotlin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>kotlin-maven-allopen<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>${kotlin.version}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugin</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugins</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>build</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>project</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>project</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://maven.apache.org/POM/4.0.0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsi</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span>\n         <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>modelVersion</span><span class=\"token punctuation\">></span></span>4.0.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>modelVersion</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>parent</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-parent<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.5.6<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>relativePath</span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>parent</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>it.chicio.pact.consumer<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>AccountService<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>0.0.1-SNAPSHOT<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span><span class=\"token punctuation\">></span></span>AccountService<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>name</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>description</span><span class=\"token punctuation\">></span></span>Message consumer example<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>description</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>properties</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>java.version</span><span class=\"token punctuation\">></span></span>11<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>java.version</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>kotlin.version</span><span class=\"token punctuation\">></span></span>1.5.31<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>kotlin.version</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arrow.version</span><span class=\"token punctuation\">></span></span>1.0.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>arrow.version</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pact.version</span><span class=\"token punctuation\">></span></span>4.2.14<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pact.version</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>properties</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.jetbrains.kotlin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>kotlin-reflect<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.jetbrains.kotlin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>kotlin-stdlib-jdk8<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token comment\">&lt;!-- arrow --></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>io.arrow-kt<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>arrow-core<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>${arrow.version}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token comment\">&lt;!-- base test dependencies --></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">></span></span>test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>io.kotest<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>kotest-runner-junit5-jvm<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>4.6.3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">></span></span>test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>io.mockk<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>mockk<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.12.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">></span></span>test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token comment\">&lt;!-- pact consumer dependency --></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>au.com.dius.pact.consumer<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>junit5<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>${pact.version}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">></span></span>test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>build</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>sourceDirectory</span><span class=\"token punctuation\">></span></span>${project.basedir}/src/main/kotlin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>sourceDirectory</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>testSourceDirectory</span><span class=\"token punctuation\">></span></span>${project.basedir}/src/test/kotlin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>testSourceDirectory</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugins</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugin</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-maven-plugin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugin</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugin</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.jetbrains.kotlin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>kotlin-maven-plugin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>args</span><span class=\"token punctuation\">></span></span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>arg</span><span class=\"token punctuation\">></span></span>-Xjsr305=strict<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>arg</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>args</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>compilerPlugins</span><span class=\"token punctuation\">></span></span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugin</span><span class=\"token punctuation\">></span></span>spring<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugin</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>compilerPlugins</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.jetbrains.kotlin<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>kotlin-maven-allopen<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>${kotlin.version}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugin</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token comment\">&lt;!-- pact publish plugin --></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>plugin</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>au.com.dius.pact.provider<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>maven<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>${pact.version}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pactBrokerUrl</span><span class=\"token punctuation\">></span></span>http://localhost<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pactBrokerUrl</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugin</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>plugins</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>build</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>project</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Now we need to set up our pact broker. For our example we can create a local instance using the docker compose file\ncontained in the <a href=\"https://github.com/pact-foundation/pact-broker-docker#running-with-docker-compose\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">pact broker official repo</a>. Obviously for a real\nproduction case you need to host your broker somewhere in your environment. The services initialized in the docker\ncompose file include:</p>\n<ul>\n<li>the pact broker PostgreSQL database instance</li>\n<li>the pact broker web app</li>\n<li>a nginx instance used as reverse proxy (in fact if you want to use/keep it in the docker compose file you have to\ndownload from the pact broker repository also the self-signed certificate used for TLS).</li>\n</ul>\n<p>Below you can find the entire docker compose file.</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\">version: \"3\"\n\nservices:\n  postgres:\n    image: postgres\n    healthcheck:\n      test: psql postgres --command \"select 1\" -U postgres\n    volumes:\n      - postgres-volume:/var/lib/postgresql/data\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: password\n      POSTGRES_DB: postgres\n\n  pact-broker:\n    image: pactfoundation/pact-broker:2.89.0.0\n    ports:\n      - \"9292:9292\"\n    depends_on:\n      - postgres\n    environment:\n      PACT_BROKER_PORT: '9292'\n      PACT_BROKER_DATABASE_URL: \"postgres://postgres:password@postgres/postgres\"\n      PACT_BROKER_LOG_LEVEL: INFO\n      PACT_BROKER_SQL_LOG_LEVEL: DEBUG\n      <span class=\"token comment\"># PACT_BROKER_DATABASE_CONNECT_MAX_RETRIES is only needed for docker-compose</span>\n      <span class=\"token comment\"># because the database takes longer to start up than the puma process</span>\n      <span class=\"token comment\"># Should not be needed in production.</span>\n      PACT_BROKER_DATABASE_CONNECT_MAX_RETRIES: \"5\"\n      <span class=\"token comment\"># The list of allowed base URLs (not setting this makes the app vulnerable to cache poisoning)</span>\n      <span class=\"token comment\"># This allows the app to be addressed from the host from within another docker container correctly</span>\n      PACT_BROKER_BASE_URL: 'https://localhost http://localhost http://localhost:9292 http://pact-broker:9292'\n\n  <span class=\"token comment\"># Nginx is not necessary, but demonstrates how</span>\n  <span class=\"token comment\"># one might use a reverse proxy in front of the broker,</span>\n  <span class=\"token comment\"># and includes the use of a self-signed TLS certificate</span>\n  nginx:\n    image: nginx:alpine\n    depends_on:\n      - pact-broker\n    volumes:\n      - ./ssl/nginx.conf:/etc/nginx/conf.d/default.conf:ro\n      - ./ssl:/etc/nginx/ssl\n    ports:\n      - \"443:443\"\n      - \"80:80\"\nvolumes:\n  postgres-volume: </code></pre></div>\n<p>We can build all the containers defined in it with the docker compose commands below.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">docker-compose</span> build\n<span class=\"token function\">docker-compose</span> up</code></pre></div>\n<p>After running the commands above we will have a pact broker local instance. We can access it in the browser\n(as localhost) and below you can see the homepage with an example contract listed. We are now ready to write our test.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a29711098aa9505de247fb16bb650441/42cf1/pact-broker-homepage.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.47368421052632%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe80Io//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAWEAEBAQAAAAAAAAAAAAAAAAAhACD/2gAIAQEAAT8hZz//2gAMAwEAAgADAAAAEMMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAMSAhUXH/2gAIAQEAAT8QQErvY2oL2Ct4f//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pact broker\"\n        title=\"Pact broker homepage\"\n        src=\"/static/a29711098aa9505de247fb16bb650441/0470c/pact-broker-homepage.jpg\"\n        srcset=\"/static/a29711098aa9505de247fb16bb650441/6c669/pact-broker-homepage.jpg 285w,\n/static/a29711098aa9505de247fb16bb650441/882a4/pact-broker-homepage.jpg 570w,\n/static/a29711098aa9505de247fb16bb650441/0470c/pact-broker-homepage.jpg 1140w,\n/static/a29711098aa9505de247fb16bb650441/01a9b/pact-broker-homepage.jpg 1710w,\n/static/a29711098aa9505de247fb16bb650441/f4b2e/pact-broker-homepage.jpg 2280w,\n/static/a29711098aa9505de247fb16bb650441/42cf1/pact-broker-homepage.jpg 2606w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Pact broker homepage</figcaption>\n  </figure></p>\n<h4>Implementation</h4>\n<p>As we said in the introduction, we are using the consumer driven contract test approch. This means that for our\nexample we will start from <code class=\"language-text\">AccountService</code>, the message consumer. In this microservice we have a\n<code class=\"language-text\">RefundReadyMessageConsumer</code>, that consume the message received from <code class=\"language-text\">RefundService</code>. Inside this class we have two\ncollaborator:</p>\n<ul>\n<li><code class=\"language-text\">RefundReadyMessagePayloadExtractor</code>, a collaborator that extract the payload from the message received</li>\n<li><code class=\"language-text\">SendCommunicationForRefundReadyUseCase</code>, a use case that uses the payload information to send a communication to\nthe user</li>\n</ul>\n<p>The payload of the message, represented by the <code class=\"language-text\">RefundReadyMessage</code> data class is very simple. It contains the id\nthat identify the refund due to the user and the relative amount (represented as a combination of value and currency).</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">Money</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> value<span class=\"token operator\">:</span> BigDecimal<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> currency<span class=\"token operator\">:</span> String\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">RefundReadyMessage</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> refundId<span class=\"token operator\">:</span> Long<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> amount<span class=\"token operator\">:</span> Money\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">interface</span> RefundReadyMessagePayloadExtractor <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">extract</span><span class=\"token punctuation\">(</span>message<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Either<span class=\"token operator\">&lt;</span>CantExtractMessage<span class=\"token punctuation\">,</span> RefundReadyMessage<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">object</span> RefundCommunicationSent\n\n<span class=\"token keyword\">interface</span> SendCommunicationForRefundReadyUseCase <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>refundReadyMessage<span class=\"token operator\">:</span> RefundReadyMessage<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Either<span class=\"token operator\">&lt;</span>CantCommunicateRefund<span class=\"token punctuation\">,</span> RefundCommunicationSent<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">sealed</span> <span class=\"token keyword\">class</span> RefundReadyMessageConsumerError <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">object</span> CantExtractMessage<span class=\"token operator\">:</span> <span class=\"token function\">RefundReadyMessageConsumerError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">object</span> CantCommunicateRefund<span class=\"token operator\">:</span> <span class=\"token function\">RefundReadyMessageConsumerError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token function\">RefundReadyMessageConsumer</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> refundReadyMessagePayloadExtractor<span class=\"token operator\">:</span> RefundReadyMessagePayloadExtractor<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> sendCommunicationForRefundReadyUseCase<span class=\"token operator\">:</span> SendCommunicationForRefundReadyUseCase\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">consume</span><span class=\"token punctuation\">(</span>message<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Either<span class=\"token operator\">&lt;</span>RefundReadyMessageConsumerError<span class=\"token punctuation\">,</span> RefundCommunicationSent<span class=\"token operator\">></span> <span class=\"token operator\">=</span>\n        refundReadyMessagePayloadExtractor\n            <span class=\"token punctuation\">.</span><span class=\"token function\">extract</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">flatMap</span> <span class=\"token punctuation\">{</span> refundReadyMessage <span class=\"token operator\">-></span>\n                sendCommunicationForRefundReadyUseCase<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>refundReadyMessage<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>As you can see our example consumer application is very simple. Let's start to write the consumer Pact test for our\n<code class=\"language-text\">RefundReadyMessageConsumer</code>. We create a new test class <code class=\"language-text\">RefundReadyMessageConsumerPactTest</code>. First we need to add\nsome annotations:</p>\n<ul>\n<li><code class=\"language-text\">@ExtendWith(PactConsumerTestExt::class, MockKExtension::class)</code> to add the Pact and\nMockK <a href=\"https://junit.org/junit5/docs/current/user-guide/#extensions\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JUnit 5 extensions</a>, in order to be able to\nuse the Pact and MockK capabilities in our test.</li>\n<li><code class=\"language-text\">@PactTestFor(providerName = \"refund-service\", providerType = ProviderType.ASYNCH)</code>, to tell the Pact extension\nhow to set up the Pact test. In our case we are defining a provider named <code class=\"language-text\">refund-service</code> of type <code class=\"language-text\">ProviderType.\nASYNCH</code>.</li>\n</ul>\n<p>Then we need to mock the collaborator of our consumer <code class=\"language-text\">refundReadyMessagePayloadExtractor</code> and\n<code class=\"language-text\">sendCommunicationForRefundReadyUseCase</code>. We can do it by using the <code class=\"language-text\">@MockK</code> annotation. Now we are ready to write\nour pact. We can do it by adding a new method <code class=\"language-text\">refundReadyMessagePact</code> annotated with the <code class=\"language-text\">@Pact(consumer = \"account-service\", provider = \n\"refund-service\")</code> annotation. In this method we will define a pact where we expect to receive a message,\nrepresented in our test as an instance of <code class=\"language-text\">MessagePact</code>, that contains the data we listed above\n(refund id, and amount). The two actors of our pact are <code class=\"language-text\">refund-service</code> and <code class=\"language-text\">account-service</code>. The first one will\nsend us a message <code class=\"language-text\">\"a refund ready to be sent to the user\"</code>, stated by the <code class=\"language-text\">given</code> method of the\n<code class=\"language-text\">MessagePactBuilder</code> class, and we expect to receive <code class=\"language-text\">\"the refund data to be communicated\"</code>, stated by the\n<code class=\"language-text\">expectsToReceive</code> method (again of the<code class=\"language-text\">MessagePactBuilder</code> class). The payload of the message is represented as\ninstance of <code class=\"language-text\">PactDslJsonBody</code>.<br>\nNow we can write our test to receive that we are consuming the message in the right way. To do this we need to\ncreate a new test method annotaed with the standard <code class=\"language-text\">@Test</code> JUnit 5 annotation. We need also to add the <code class=\"language-text\">@PactTestFor\n(pactMethod = \"refundReadyMessagePact\")</code>, that instruct the Pact extension to inject the <code class=\"language-text\">MessagePact</code> generated\nfrom the pact created by the <code class=\"language-text\">refundReadyMessagePact</code> method we talked about before. So the signature of the test\nwill have <code class=\"language-text\">messages: List&lt;Message></code> parameter with the list of message we defined in our pact (in our case it is\njust one message). We can now instruct the mocks and write our assertions on the result of the <code class=\"language-text\">consume</code> method of our\n<code class=\"language-text\">RefundReadyMessageConsumer</code>. At this point we should have a green test like the one below, and it should be already\ngreen <img class=\"emoji-icon\" alt=\"emoji-white_check_mark\" data-icon=\"emoji-white_check_mark\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-white_check_mark\"> <img class=\"emoji-icon\" alt=\"emoji-smirk\" data-icon=\"emoji-smirk\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-smirk\">.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@ExperimentalUnsignedTypes</span>\n<span class=\"token annotation builtin\">@ExtendWith</span><span class=\"token punctuation\">(</span>PactConsumerTestExt<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> MockKExtension<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation builtin\">@PactTestFor</span><span class=\"token punctuation\">(</span>providerName <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"refund-service\"</span></span><span class=\"token punctuation\">,</span> providerType <span class=\"token operator\">=</span> ProviderType<span class=\"token punctuation\">.</span>ASYNCH<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> RefundReadyMessageConsumerPactTest <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation builtin\">@MockK</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">lateinit</span> <span class=\"token keyword\">var</span> refundReadyMessagePayloadExtractor<span class=\"token operator\">:</span> RefundReadyMessagePayloadExtractor\n    <span class=\"token annotation builtin\">@MockK</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">lateinit</span> <span class=\"token keyword\">var</span> sendCommunicationForRefundReadyUseCase<span class=\"token operator\">:</span> SendCommunicationForRefundReadyUseCase\n\n    <span class=\"token annotation builtin\">@Pact</span><span class=\"token punctuation\">(</span>consumer <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"account-service\"</span></span><span class=\"token punctuation\">,</span> provider <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"refund-service\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">refundReadyMessagePact</span><span class=\"token punctuation\">(</span>builder<span class=\"token operator\">:</span> MessagePactBuilder<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> MessagePact <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> builder\n            <span class=\"token punctuation\">.</span><span class=\"token function\">given</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"a refund ready to be sent to the user\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">hasPactWith</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"refund-service\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">expectsToReceive</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"the refund data to be communicated\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">withContent</span><span class=\"token punctuation\">(</span>\n                <span class=\"token function\">PactDslJsonBody</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">numberType</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"refundId\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token number\">123</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">`object`</span><span class=\"token punctuation\">(</span>\n                        <span class=\"token string-literal singleline\"><span class=\"token string\">\"amount\"</span></span><span class=\"token punctuation\">,</span>\n                        <span class=\"token function\">PactDslJsonBody</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">numberType</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"value\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n                            <span class=\"token punctuation\">.</span><span class=\"token function\">stringType</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"currency\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"EUR\"</span></span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">toPact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation builtin\">@Test</span>\n    <span class=\"token annotation builtin\">@PactTestFor</span><span class=\"token punctuation\">(</span>pactMethod <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"refundReadyMessagePact\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">`consume refund ready message`</span><span class=\"token punctuation\">(</span>messages<span class=\"token operator\">:</span> List<span class=\"token operator\">&lt;</span>Message<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        every <span class=\"token punctuation\">{</span>\n            refundReadyMessagePayloadExtractor<span class=\"token punctuation\">.</span><span class=\"token function\">extract</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"{\\\"amount\\\":{\\\"currency\\\":\\\"EUR\\\",\\\"value\\\":100},\\\"refundId\\\":123}\"</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> returns refundReadyMessage<span class=\"token punctuation\">.</span><span class=\"token function\">right</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        every <span class=\"token punctuation\">{</span>\n            sendCommunicationForRefundReadyUseCase<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>refundReadyMessage<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> returns RefundCommunicationSent<span class=\"token punctuation\">.</span><span class=\"token function\">right</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token function\">RefundReadyMessageConsumer</span><span class=\"token punctuation\">(</span>refundReadyMessagePayloadExtractor<span class=\"token punctuation\">,</span> sendCommunicationForRefundReadyUseCase<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">consume</span><span class=\"token punctuation\">(</span>messages<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">contentsAsString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> shouldBe RefundCommunicationSent<span class=\"token punctuation\">.</span><span class=\"token function\">right</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token function\">verify</span><span class=\"token punctuation\">(</span>exactly <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            refundReadyMessagePayloadExtractor<span class=\"token punctuation\">.</span><span class=\"token function\">extract</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"{\\\"amount\\\":{\\\"currency\\\":\\\"EUR\\\",\\\"value\\\":100},\\\"refundId\\\":123}\"</span></span><span class=\"token punctuation\">)</span>\n            sendCommunicationForRefundReadyUseCase<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>refundReadyMessage<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">companion</span> <span class=\"token keyword\">object</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> refundReadyMessage <span class=\"token operator\">=</span> <span class=\"token function\">RefundReadyMessage</span><span class=\"token punctuation\">(</span><span class=\"token number\">123</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Money</span><span class=\"token punctuation\">(</span><span class=\"token function\">BigDecimal</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"100\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"EUR\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now that our test is ready and green, how can we publish the contract to the Pact Broker? If we have a look at the\n<code class=\"language-text\">target</code> folder of our application after running the test, we will find a new <code class=\"language-text\">pacts</code> folder that contains a json\nnamed <code class=\"language-text\">account-service-refund-service.json</code>: this is our contract!!! <img class=\"emoji-icon\" alt=\"emoji-rocket\" data-icon=\"emoji-rocket\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-rocket\"> If you remember the introduction set up,\nwe installed a plugin in order to publish the contract to the broker. So the only thing we have to do is launch the\nfollowing command and the contract will be published on the pact broker.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">mvn pact:publish</code></pre></div>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e3869eb0a44a34a197a567b7eec54600/c58a3/pact-publish-example.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.298245614035096%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABjT1MIotF/8QAGxAAAgMAAwAAAAAAAAAAAAAAAQIAAxIEERT/2gAIAQEAAQUCdjrTSknJ469+ZJXQoH//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAADAQADAAAAAAAAAAAAAAAAATEhAjKR/9oACAEBAAY/Anrp2fpXR6y8is//xAAcEAEAAgEFAAAAAAAAAAAAAAABADEQEUFRofH/2gAIAQEAAT8hBoXN8AW+5G8zPQIjC2f/2gAMAwEAAgADAAAAEOTP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHhABAAICAQUAAAAAAAAAAAAAAQAhUWERMXHB0fD/2gAIAQEAAT8Quh2Xy7ifvR5Ut1eCMjemkz2nxHiNwDytMGp//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pact publish example\"\n        title=\"Pact publish example\"\n        src=\"/static/e3869eb0a44a34a197a567b7eec54600/0470c/pact-publish-example.jpg\"\n        srcset=\"/static/e3869eb0a44a34a197a567b7eec54600/6c669/pact-publish-example.jpg 285w,\n/static/e3869eb0a44a34a197a567b7eec54600/882a4/pact-publish-example.jpg 570w,\n/static/e3869eb0a44a34a197a567b7eec54600/0470c/pact-publish-example.jpg 1140w,\n/static/e3869eb0a44a34a197a567b7eec54600/c58a3/pact-publish-example.jpg 1500w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Pact publish example</figcaption>\n  </figure></p>\n<p>If we reload the pact broker homepage now we should see a new contract, the one we just published, with all the data\nneeded by the provider to verify its payload. Below you can see a screenshot of the pact broker that show our new\ncontract.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a29711098aa9505de247fb16bb650441/42cf1/pact-broker-homepage.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.47368421052632%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe80Io//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAWEAEBAQAAAAAAAAAAAAAAAAAhACD/2gAIAQEAAT8hZz//2gAMAwEAAgADAAAAEMMP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAMSAhUXH/2gAIAQEAAT8QQErvY2oL2Ct4f//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"pact broker contract message example\"\n        title=\"Our Pact broker contract message \npage\"\n        src=\"/static/a29711098aa9505de247fb16bb650441/0470c/pact-broker-homepage.jpg\"\n        srcset=\"/static/a29711098aa9505de247fb16bb650441/6c669/pact-broker-homepage.jpg 285w,\n/static/a29711098aa9505de247fb16bb650441/882a4/pact-broker-homepage.jpg 570w,\n/static/a29711098aa9505de247fb16bb650441/0470c/pact-broker-homepage.jpg 1140w,\n/static/a29711098aa9505de247fb16bb650441/01a9b/pact-broker-homepage.jpg 1710w,\n/static/a29711098aa9505de247fb16bb650441/f4b2e/pact-broker-homepage.jpg 2280w,\n/static/a29711098aa9505de247fb16bb650441/42cf1/pact-broker-homepage.jpg 2606w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">Our Pact broker contract message \npage</figcaption>\n  </figure></p>\n<p>Now we can write our provider test. Let's see first the <code class=\"language-text\">RefundService</code> codebase. As our consumer, it is very simple.\nWe have a <code class=\"language-text\">RefundReadyMessageProducer</code> that produce a Refund Ready message as a string. It uses <code class=\"language-text\">RefundRepository</code>\nas collaborator to get the information about the refund of a user, represented as a <code class=\"language-text\">Refund</code> data class (again with\nid and amount of the refund).</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">Money</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> value<span class=\"token operator\">:</span> BigDecimal<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> currency<span class=\"token operator\">:</span> String\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">data</span> <span class=\"token keyword\">class</span> <span class=\"token function\">Refund</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">val</span> refundId<span class=\"token operator\">:</span> Long<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">val</span> amount<span class=\"token operator\">:</span> Money\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">interface</span> RefundRepository <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>refundId<span class=\"token operator\">:</span> Long<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Either<span class=\"token operator\">&lt;</span>RefundReadyMessageProducerError<span class=\"token punctuation\">.</span>RefundRepositoryError<span class=\"token punctuation\">,</span> Refund<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">sealed</span> <span class=\"token keyword\">class</span> RefundReadyMessageProducerError <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">object</span> RefundRepositoryError <span class=\"token operator\">:</span> <span class=\"token function\">RefundReadyMessageProducerError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token function\">RefundReadyMessageProducer</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> refundRepository<span class=\"token operator\">:</span> RefundRepository<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">produceFor</span><span class=\"token punctuation\">(</span>refundId<span class=\"token operator\">:</span> Long<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Either<span class=\"token operator\">&lt;</span>RefundReadyMessageProducerError<span class=\"token punctuation\">,</span> String<span class=\"token operator\">></span> <span class=\"token operator\">=</span>\n        refundRepository\n            <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>refundId<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">flatMap</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">jacksonObjectMapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">writeValueAsString</span><span class=\"token punctuation\">(</span>it<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">right</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Let's write our <code class=\"language-text\">RefundReadyMessageProducerTest</code>. As for the consumer, we need the <code class=\"language-text\">@ExtendWith\n(MockKExtension::class)</code> to be able to use MockK as mocking framework. Then we have some Pact annotations and methods.\nThese are needed in order to use the JUnit 5 Invocation Context Provider that will generate a test for each\ninteraction found for the pact files for the provider. The annotations are:</p>\n<ul>\n<li><code class=\"language-text\">@Provider(\"refund-service\")</code>, to defined which provider we are</li>\n<li><code class=\"language-text\">@Consumer(\"account-service\")</code>, to define who is our consumer</li>\n<li><code class=\"language-text\">@PactBroker(host = \"localhost\", port = \"80\")</code>, to define the location of the pact broker</li>\n</ul>\n<p>Then we have the <code class=\"language-text\">testTemplate</code> and <code class=\"language-text\">before</code> methods that completes our setup. As you can see the target of our\n<code class=\"language-text\">PactVerificationContext</code> is of type <code class=\"language-text\">MessageTestTarget</code>. One important thing: in the constructor of\n<code class=\"language-text\">MessageTestTarget</code> we are passing the <code class=\"language-text\">packagesToScan = listOf(this::class.java.packageName)</code> parameter in order to\nlet Pact search for pact methods (see below <code class=\"language-text\">@PactVerifyProvide</code>) only in the package of the class under test.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//...</span>\n\n<span class=\"token annotation builtin\">@TestTemplate</span>\n<span class=\"token annotation builtin\">@ExtendWith</span><span class=\"token punctuation\">(</span>PactVerificationInvocationContextProvider<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">fun</span> <span class=\"token function\">testTemplate</span><span class=\"token punctuation\">(</span>pact<span class=\"token operator\">:</span> Pact<span class=\"token punctuation\">,</span> interaction<span class=\"token operator\">:</span> Interaction<span class=\"token punctuation\">,</span> context<span class=\"token operator\">:</span> PactVerificationContext<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    context<span class=\"token punctuation\">.</span><span class=\"token function\">verifyInteraction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation builtin\">@BeforeEach</span>\n<span class=\"token keyword\">fun</span> <span class=\"token function\">before</span><span class=\"token punctuation\">(</span>context<span class=\"token operator\">:</span> PactVerificationContext<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    context<span class=\"token punctuation\">.</span>target <span class=\"token operator\">=</span> <span class=\"token function\">MessageTestTarget</span><span class=\"token punctuation\">(</span>packagesToScan <span class=\"token operator\">=</span> <span class=\"token function\">listOf</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">.</span>packageName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//...</span></code></pre></div>\n<p>At this point we can write our test. If you remember from the consumer test we defined a <code class=\"language-text\">given</code> section of our pact\nwith the phrase <code class=\"language-text\">\"a refund ready to be sent to the user\"</code> and a <code class=\"language-text\">expectsToReceive</code> with the phrase <code class=\"language-text\">\"the refund data to be communicated\"</code>. These phrases\nare used as identifier by the <code class=\"language-text\">@State(\"a refund ready to be sent to the user\")</code> and <code class=\"language-text\">@PactVerifyProvider(\"the refund \ndata to be communicated\")</code> annotation to understand which pact we are verifying. We can now just write our test by\nmocking our repository and let our producer return the message produced: Pact will do all the verification between\nthe message we are generating in the test and the one contained in the contract.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@ExtendWith</span><span class=\"token punctuation\">(</span>MockKExtension<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation builtin\">@Provider</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"refund-service\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation builtin\">@Consumer</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"account-service\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation builtin\">@PactBroker</span><span class=\"token punctuation\">(</span>host <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"localhost\"</span></span><span class=\"token punctuation\">,</span> port <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"80\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> RefundReadyMessageProducerTest <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation builtin\">@MockK</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">lateinit</span> <span class=\"token keyword\">var</span> refundRepository<span class=\"token operator\">:</span> RefundRepository\n\n    <span class=\"token annotation builtin\">@TestTemplate</span>\n    <span class=\"token annotation builtin\">@ExtendWith</span><span class=\"token punctuation\">(</span>PactVerificationInvocationContextProvider<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">testTemplate</span><span class=\"token punctuation\">(</span>pact<span class=\"token operator\">:</span> Pact<span class=\"token punctuation\">,</span> interaction<span class=\"token operator\">:</span> Interaction<span class=\"token punctuation\">,</span> context<span class=\"token operator\">:</span> PactVerificationContext<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        context<span class=\"token punctuation\">.</span><span class=\"token function\">verifyInteraction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation builtin\">@BeforeEach</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">before</span><span class=\"token punctuation\">(</span>context<span class=\"token operator\">:</span> PactVerificationContext<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        context<span class=\"token punctuation\">.</span>target <span class=\"token operator\">=</span> <span class=\"token function\">MessageTestTarget</span><span class=\"token punctuation\">(</span>packagesToScan <span class=\"token operator\">=</span> <span class=\"token function\">listOf</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">.</span>packageName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation builtin\">@State</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"a refund ready to be sent to the user\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation builtin\">@PactVerifyProvider</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"the refund data to be communicated\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">`produce refund ready message`</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> String <span class=\"token punctuation\">{</span>\n        every <span class=\"token punctuation\">{</span>\n            refundRepository<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">123</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> returns <span class=\"token function\">Refund</span><span class=\"token punctuation\">(</span>\n            <span class=\"token number\">123</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">Money</span><span class=\"token punctuation\">(</span>\n                <span class=\"token function\">BigDecimal</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string-literal singleline\"><span class=\"token string\">\"EUR\"</span></span>\n            <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">right</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token function\">RefundReadyMessageProducer</span><span class=\"token punctuation\">(</span>refundRepository<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">produceFor</span><span class=\"token punctuation\">(</span><span class=\"token number\">123</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">fold</span><span class=\"token punctuation\">(</span>\n                <span class=\"token punctuation\">{</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"invalid message\"</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span> it <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>At this point we should have a green test also on the provider, and our contract between our producer and consumer\nis verified!!! <img class=\"emoji-icon\" alt=\"emoji-rocket\" data-icon=\"emoji-rocket\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-rocket\"></p>\n<h4>Conclusion</h4>\n<p>You can find the example described in this post in this\n<a href=\"https://github.com/chicio/Contract-Testing-Asynchronous-Messaging-Pact\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Github repository</a>. As we saw from the\nexample above Pact is a powerful testing tool. It lets you write consumer driven contract test that are faster than\nall the E2E/integration testing tools you can use in your application. But most important Pact gives you the ability\nto refactor the design of an API/message in a safe and controlled way <img class=\"emoji-icon\" alt=\"emoji-passport_control\" data-icon=\"emoji-passport_control\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-passport_control\"> <img class=\"emoji-icon\" alt=\"emoji-heart_eyes\" data-icon=\"emoji-heart_eyes\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-heart_eyes\">.</p>"}