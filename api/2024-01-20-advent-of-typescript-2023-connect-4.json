{"title":"Advent of TypeScript 2023: Connect 4 (Day 23)","description":"Connect 4, a classical family Christmas game. Let's see how to tackle it with the typescript type system.","date":"20 Jan 2024","readingTime":"24 min read","featuredImageUrl":"https://www.fabrizioduroni.it/static/a13a1725790511f6f43ec66d996212b4/advent-of-typescript-connect-4.jpg","authors":[{"name":"Fabrizio Duroni","url":"https://www.linkedin.com/in/fabrizio-duroni/","imageUrl":"https://www.fabrizioduroni.it/static/04f0a7ef38819e8782b8b6f55b44fd95/fabrizio-duroni.jpg"}],"tags":["typescript","advent of typescript 2023"],"math":false,"content":"<p><em>Connect 4, a classical family Christmas game. Let's see how to tackle it with the TypeScript type system.</em></p>\n<hr>\n<p>This is the third of the four challenges I liked the most from \"Advent Of TypeScript 2023\" by [TypeHero]\n(<a href=\"https://typehero.dev\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://typehero.dev</a>).\nCheck out the other challenges I liked <a href=\"/2023/12/29/advent-of-typescript-2023-favourite-challenges/\" title=\"advent of typescript 2023 challenges\">here</a>.</p>\n<h4>The problem</h4>\n<p>Connect 4, a classical family Christmas game. Let's see how to tackle it with the typescript type system.\nLet's check the rule briefly explained by the guy from TypeHero:</p>\n<blockquote>\n<p>In case you haven't played it before: Connect 4 is a game in which the players choose a color and then take turns dropping colored tokens into a six-row, seven-column vertically suspended grid. The pieces fall straight down, occupying the lowest available space within the column. The objective of the game is to be the first to form a horizontal, vertical, or diagonal line of four of one's own tokens.</p>\n</blockquote>\n<p>The goal of the exercise was to implement the <code class=\"language-text\">Connect4</code> type.</p>\n<h4>Implementation</h4>\n<p>The exercise gave me some data structure to use as the basis of my development (as it was in the previous exercises).\nAgain, they were the domain data structures of the Connect 4 game.\nThere was the definition of the chips, of an empty cell and all the possible states of the game.\nThere was also the definition in terms of data structure of the game board and the game itself.\nThe last one was composed by the current board and the current state of the game.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Connect4Chips</span> <span class=\"token operator\">=</span> <span class=\"token string\">'游댮'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Connect4EmptyCell</span> <span class=\"token operator\">=</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Connect4Cell</span> <span class=\"token operator\">=</span> Connect4Chips <span class=\"token operator\">|</span> Connect4EmptyCell<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Connect4State</span> <span class=\"token operator\">=</span> <span class=\"token string\">'游댮'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'游리'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'游댮 Won'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'游리 Won'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'Draw'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Connect4Board</span> <span class=\"token operator\">=</span> Connect4Cell<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Connect4Game</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  board<span class=\"token operator\">:</span> Connect4Board<span class=\"token punctuation\">;</span>\n  state<span class=\"token operator\">:</span> Connect4State<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">EmptyBoard</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NewGame</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  board<span class=\"token operator\">:</span> EmptyBoard<span class=\"token punctuation\">;</span>\n  state<span class=\"token operator\">:</span> <span class=\"token string\">\"游리\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>As it was for the previous exercises, a list of test cases was available for verifying that the implementation was\ncorrect.\nThe input of each game move to the <code class=\"language-text\">Connect4</code> type, the one asked to be implemented by the exercise, are:</p>\n<ul>\n<li>the current game</li>\n<li>the column on which the chip should be placed</li>\n</ul>\n<p>The current player is contained in the game itself (as we saw before).\n<code class=\"language-text\">Connect4</code> should return a new game, with the next player or who wan in the game state, and the updated board.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">test_move1_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>NewGame<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_move1_expected = {\n  board: [\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n  ];\n  state: \"游댮\";\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_move2_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>test_move1_actual<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_move2_expected = {\n  board: [\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游댮\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n  ];\n  state: \"游리\";\n};\n */</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_move3_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>test_move2_actual<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_move3_expected = {\n  board: [\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游댮\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n  ];\n  state: \"游댮\";\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_move4_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>test_move3_actual<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_move4_expected = {\n  board: [\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游댮\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"游댮\", \"  \", \"  \", \"  \", \"  \", \"  \"],\n  ];\n  state: \"游리\";\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_move5_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>test_move4_actual<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_move5_expected = {\n  board: [\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游댮\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"游댮\", \"游리\", \"  \", \"  \", \"  \", \"  \"],\n  ];\n  state: \"游댮\";\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_move6_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>test_move5_actual<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_move6_expected = {\n  board: [\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游댮\", \"游댮\", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"游댮\", \"游리\", \"  \", \"  \", \"  \", \"  \"],\n  ];\n  state: \"游리\";\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_red_win_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>\n  <span class=\"token punctuation\">{</span>\n    board<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    state<span class=\"token operator\">:</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">3</span>\n<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_red_win_expected = {\n  board: [\n    ['  ', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['  ', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['游리', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['游리', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['游댮', '游댮', '游댮', '游댮', '  ', '  ', '  '],\n    ['游리', '游댮', '游리', '游리', '  ', '  ', '  ']\n  ];\n  state: '游댮 Won';\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_yellow_win_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>\n  <span class=\"token punctuation\">{</span>\n    board<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    state<span class=\"token operator\">:</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">1</span>\n<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_yellow_win_expected = {\n  board: [\n    ['  ', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['  ', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['游댮', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['游리', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['游댮', '  ', '游댮', '游댮', '  ', '  ', '  '],\n    ['游리', '游리', '游리', '游리', '  ', '  ', '  ']\n  ];\n  state: '游리 Won';\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_diagonal_yellow_win_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>\n  <span class=\"token punctuation\">{</span>\n    board<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    state<span class=\"token operator\">:</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">3</span>\n<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_diagonal_yellow_win_expected = {\n  board: [\n    ['  ', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['  ', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['  ', '  ', '  ', '游리', '  ', '  ', '  '],\n    ['  ', '  ', '游리', '游댮', '  ', '  ', '  '],\n    ['游댮', '游리', '游댮', '游댮', '  ', '  ', '  '],\n    ['游리', '游댮', '游리', '游리', '  ', '  ', '  ']\n  ];\n  state: '游리 Won';\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_draw_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>\n  <span class=\"token punctuation\">{</span>\n    board<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    state<span class=\"token operator\">:</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">6</span>\n<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_draw_expected = {\n  board: [\n    ['游리', '游댮', '游댮', '游리', '游리', '游댮', '游리'],\n    ['游댮', '游리', '游리', '游댮', '游댮', '游리', '游댮'],\n    ['游리', '游댮', '游댮', '游리', '游리', '游댮', '游리'],\n    ['游댮', '游리', '游리', '游댮', '游댮', '游리', '游댮'],\n    ['游리', '游댮', '游댮', '游리', '游리', '游댮', '游리'],\n    ['游댮', '游리', '游리', '游댮', '游댮', '游리', '游댮']\n  ];\n  state: 'Draw';\n};\n*/</span></code></pre></div>\n<p>The first thing I did was implementing a type to find the position in the board where the chip should have been placed,\ngiven the column as parameter.\n<code class=\"language-text\">PositionOnBoard</code> is a type tha given the current board, and the column where the player wants to place is chip,<br>\nreturns the board position as a tuple of numbers (so it is like a coordinate point on a matrix).\nHow did I calculate the coordinates?\nFor the column it is really easy: is the one received as parameter <img class=\"emoji-icon\" alt=\"emoji-laughing\" data-icon=\"emoji-laughing\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-laughing\">.\nFor the row, I needed to find the first cell not occupied before one with a chip (or the last one if not chips are\npresent on that column).\nTo do this, I created a <code class=\"language-text\">RowStatusFor</code> type that, given a column position and the curren board, loops through all the\nrows and checks if for the current row the <code class=\"language-text\">Column</code> position is occupied:</p>\n<ul>\n<li>if not, it returns the row position</li>\n<li>if yes, it returns the content of the cell</li>\n</ul>\n<p>This means that <code class=\"language-text\">RowStatusFor</code> returns an array with a mix of numbers and chip element.\nThe highest number in the array is the farest not occupied position for <code class=\"language-text\">Column</code>.\nTo extract this information, I created a <code class=\"language-text\">FindLastRowNotOccupied</code> type, that scans the array created from\n<code class=\"language-text\">RowStatusFor</code> type (<code class=\"language-text\">ColumnStatus</code>), and returns <code class=\"language-text\">LastFreeCell</code>.\n<code class=\"language-text\">LastFreeCell</code> is a parameter of <code class=\"language-text\">FindLastRowNotOccupied</code>, and is updated on each recursion iteration through the\n<code class=\"language-text\">RowStatusFor</code> array with the current not occupied cell.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">ToInt<span class=\"token operator\">&lt;</span>StringToBeConverted<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> StringToBeConverted <span class=\"token keyword\">extends</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">infer</span> StringContent <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">number</span></span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span> \n  <span class=\"token operator\">?</span> StringContent \n  <span class=\"token operator\">:</span> <span class=\"token builtin\">never</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">RowStatusFor<span class=\"token operator\">&lt;</span>Column <span class=\"token keyword\">extends</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span>Row <span class=\"token keyword\">in</span> <span class=\"token keyword\">keyof</span> CurrentBoard<span class=\"token punctuation\">]</span>\n    <span class=\"token operator\">:</span> CurrentBoard<span class=\"token punctuation\">[</span>Row<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>Column<span class=\"token punctuation\">]</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Connect4EmptyCell</span> \n      <span class=\"token operator\">?</span> ToInt<span class=\"token operator\">&lt;</span>Row<span class=\"token operator\">></span> \n      <span class=\"token operator\">:</span> CurrentBoard<span class=\"token punctuation\">[</span>Row<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>Column<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">FindLastRowNotOccupied<span class=\"token operator\">&lt;</span>\n  ColumStatus <span class=\"token keyword\">extends</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> Connect4Cell<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  LastFreeCell <span class=\"token keyword\">extends</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">never</span>\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        ColumStatus <span class=\"token keyword\">extends</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token keyword\">infer</span> CurrentCellStatus <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">number</span></span><span class=\"token punctuation\">,</span> \n          <span class=\"token operator\">...</span><span class=\"token keyword\">infer</span> OtherCellsStatuses <span class=\"token keyword\">extends</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> Connect4Chips<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">]</span>\n          <span class=\"token operator\">?</span> FindLastRowNotOccupied<span class=\"token operator\">&lt;</span>OtherCellsStatuses<span class=\"token punctuation\">,</span> CurrentCellStatus<span class=\"token operator\">></span>\n          <span class=\"token operator\">:</span> LastFreeCell<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">FindRowPosition<span class=\"token operator\">&lt;</span>\n  CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token punctuation\">,</span> \n  Column <span class=\"token keyword\">extends</span> <span class=\"token builtin\">number</span>\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> FindLastRowNotOccupied<span class=\"token operator\">&lt;</span>RowStatusFor<span class=\"token operator\">&lt;</span>Column<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">PositionOnBoard<span class=\"token operator\">&lt;</span>\n  CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token punctuation\">,</span> \n  Column <span class=\"token keyword\">extends</span> <span class=\"token builtin\">number</span>\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>FindRowPosition<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">,</span> Column<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> Column<span class=\"token punctuation\">]</span></code></pre></div>\n<p>Now that I was able to calculate the position of the board for the current move, I was ready to create <code class=\"language-text\">UpdateBoard</code>\ntype.\nIn this type I passed the current position on the board to be updated, <code class=\"language-text\">NextMovePosition</code>, and looped over the board,\nto find the correspondent cell and update it.\nI created also a support type called <code class=\"language-text\">UpdateColumn</code> in order to separate the loop through the row and the column\npositions.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">UpdateColumn<span class=\"token operator\">&lt;</span>\n  Row <span class=\"token keyword\">extends</span> Connect4Cell<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  NextChip <span class=\"token keyword\">extends</span> Connect4Chips<span class=\"token punctuation\">,</span> ColumnPosition <span class=\"token keyword\">extends</span> <span class=\"token builtin\">number</span>\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span>Index <span class=\"token keyword\">in</span> <span class=\"token keyword\">keyof</span> Row<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span>\n    Index <span class=\"token keyword\">extends</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>ColumnPosition<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token operator\">?</span> Row<span class=\"token punctuation\">[</span>Index<span class=\"token punctuation\">]</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Connect4Cell</span>\n                  <span class=\"token operator\">?</span> NextChip\n                  <span class=\"token operator\">:</span> Row<span class=\"token punctuation\">[</span>Index<span class=\"token punctuation\">]</span>\n          <span class=\"token operator\">:</span> Row<span class=\"token punctuation\">[</span>Index<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">UpdateBoard<span class=\"token operator\">&lt;</span>\n  CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token punctuation\">,</span> \n  NextMovePosition <span class=\"token keyword\">extends</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n  NextChip <span class=\"token keyword\">extends</span> Connect4Chips\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        NextMovePosition <span class=\"token keyword\">extends</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span>\n                <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">{</span>\n                  <span class=\"token punctuation\">[</span>Index <span class=\"token keyword\">in</span> <span class=\"token keyword\">keyof</span> CurrentBoard<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span>\n                  Index <span class=\"token keyword\">extends</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>NextMovePosition<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n                          <span class=\"token operator\">?</span> UpdateColumn<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">[</span>Index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> NextChip<span class=\"token punctuation\">,</span> NextMovePosition<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span>\n                          <span class=\"token operator\">:</span> CurrentBoard<span class=\"token punctuation\">[</span>Index<span class=\"token punctuation\">]</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n                <span class=\"token operator\">:</span> CurrentBoard<span class=\"token punctuation\">;</span></code></pre></div>\n<p>The only part missing at this point was the update of the state. This was quite challenging. Especially the part\nwhere I needed to verify that someone won the game.\nIf you remember from the <a href=\"/2024/01/04/advent-of-typescript-2023-tic-tac-toe/\">previous challenge, tic tac toe</a>, what\nI did was to hardcode the diagonal checks.\nHere I used the same approach.\nThe pain point was that the diagonals to be hardcoded are quite a few, especially considering the size of the board (6\nx 7), and the fact that the diagonal can be in two directions: from left to right and from right to left <img class=\"emoji-icon\" alt=\"emoji-sweat_smile\" data-icon=\"emoji-sweat_smile\" style=\"display: inline; margin: 0; position: relative; width: 20px\" src=\"data:image/png;base64, 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\" title=\"emoji-sweat_smile\">.\nBelow, you can find a schema I created from highlighting visually the diagonals from left to right.</p>\n<p><figure class=\"gatsby-resp-image-figure\" style=\"\">\n    <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1140px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a51960c283df084418ac20df2166e894/6a361/advent-of-typescript-connect-4-diagonals.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.12280701754386%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAECAwQF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB7DdJpIB//8QAGRABAAMBAQAAAAAAAAAAAAAAAgABERMS/9oACAEBAAEFArVFdJS2IbOVwHyf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAECAxQf/aAAgBAQAGPwLUo//EABgQAQEBAQEAAAAAAAAAAAAAAAERADGB/9oACAEBAAE/IZiL3BekwC6m5weC3f/aAAwDAQACAAMAAAAQsA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAACAwACAwAAAAAAAAAAAAABEQAhMUFRYYGR/9oACAEBAAE/EGOQtNL8eptLYzFNBZge8MMNCMV8/IiYm2J//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"The diagonals from left to right\"\n        title=\"The diagonals from left to right.\"\n        src=\"/static/a51960c283df084418ac20df2166e894/0470c/advent-of-typescript-connect-4-diagonals.jpg\"\n        srcset=\"/static/a51960c283df084418ac20df2166e894/6c669/advent-of-typescript-connect-4-diagonals.jpg 285w,\n/static/a51960c283df084418ac20df2166e894/882a4/advent-of-typescript-connect-4-diagonals.jpg 570w,\n/static/a51960c283df084418ac20df2166e894/0470c/advent-of-typescript-connect-4-diagonals.jpg 1140w,\n/static/a51960c283df084418ac20df2166e894/6a361/advent-of-typescript-connect-4-diagonals.jpg 1351w\"\n        sizes=\"(max-width: 1140px) 100vw, 1140px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n    <figcaption class=\"gatsby-resp-image-figcaption\">The diagonals from left to right.</figcaption>\n  </figure></p>\n<p>The base type I created is the <code class=\"language-text\">SequentialElementsWinningFor</code>.\nIt receives an array of board cells, it scans them to see if there is a sequence of four cells with the same chip,\nmeaning that one of the two players won.\nIf this condition is not found, <code class=\"language-text\">never</code> is returned (do you remember the discussion about it from one of my<br>\n<a href=\"/2023/12/30/advent-of-typescript-2023-rock-paper-scissors/\">previous articles</a>?)\nSo I composed multiple calls to <code class=\"language-text\">SequentialElementsWinningFor</code> with different lists of cells (including the diagonal\nand the columns with the wrapper type <code class=\"language-text\">ColumnWinningFor</code>) in a new type called <code class=\"language-text\">IsWinning</code>, that can be invoked two\ntimes (one time for each chip).\nThis is what I did in the <code class=\"language-text\">IsSomeoneWinning</code> type: a union type that describes the states of the two chips with\nrespect to the fact that one of them won the game.\nIn the end this is not a real union type, because the chips (both or just one) that are not in a winning state will\nreturn <code class=\"language-text\">never</code>, and so the union type will discard them.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">NextChip<span class=\"token operator\">&lt;</span>CurrentState <span class=\"token keyword\">extends</span> Connect4Chips<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        CurrentState <span class=\"token keyword\">extends</span> <span class=\"token string\">'游댮'</span>\n                <span class=\"token operator\">?</span> <span class=\"token string\">'游리'</span>\n                <span class=\"token operator\">:</span> <span class=\"token string\">'游댮'</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>\n  Chip <span class=\"token keyword\">extends</span> Connect4Chips<span class=\"token punctuation\">,</span> Row <span class=\"token keyword\">extends</span> Connect4Cell<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n  CurrentCountOfChip <span class=\"token keyword\">extends</span> Chip<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        CurrentCountOfChip<span class=\"token punctuation\">[</span><span class=\"token string\">'length'</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">extends</span> <span class=\"token number\">4</span>\n                <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Chip<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> Won</span><span class=\"token template-punctuation string\">`</span></span>\n                <span class=\"token operator\">:</span> Row <span class=\"token keyword\">extends</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">infer</span> CurrentChip <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Connect4Cell</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token keyword\">infer</span> OtherChips <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Connect4Cell</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n                        <span class=\"token operator\">?</span> CurrentChip <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Chip</span>\n                                <span class=\"token operator\">?</span> SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> OtherChips<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>CurrentCountOfChip<span class=\"token punctuation\">,</span> CurrentChip<span class=\"token punctuation\">]</span><span class=\"token operator\">></span>\n                                <span class=\"token operator\">:</span> SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> OtherChips<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span>\n                        <span class=\"token operator\">:</span> <span class=\"token builtin\">never</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ExtractColumn<span class=\"token operator\">&lt;</span>ColumnIndex <span class=\"token keyword\">extends</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span>Index <span class=\"token keyword\">in</span> <span class=\"token keyword\">keyof</span> CurrentBoard<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> CurrentBoard<span class=\"token punctuation\">[</span>Index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>ColumnIndex<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ColumnWinningFor<span class=\"token operator\">&lt;</span>\n  Chip <span class=\"token keyword\">extends</span> Connect4Chips<span class=\"token punctuation\">,</span> \n  ColumnIndex <span class=\"token keyword\">extends</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> \n  CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> ExtractColumn<span class=\"token operator\">&lt;</span>ColumnIndex<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">>></span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">IsWinning<span class=\"token operator\">&lt;</span>Chip <span class=\"token keyword\">extends</span> Connect4Chips<span class=\"token punctuation\">,</span> CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        ColumnWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        ColumnWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        ColumnWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        ColumnWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        ColumnWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        ColumnWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        ColumnWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">IsSomeoneWinning<span class=\"token operator\">&lt;</span>\n  CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> IsWinning<span class=\"token operator\">&lt;</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span>CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span> IsWinning<span class=\"token operator\">&lt;</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span>CurrentBoard<span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>So I was ready to implement a type to update the state of the game.\n<code class=\"language-text\">UpdateState</code> rely on the previous types I defined to get the state of the game.\nIf someone has won the game, it returns the \"winning\" state.\nIf there are empty cells (check done by the type <code class=\"language-text\">AreThereEmptyCells</code>), the game continues and the next chip is\nreturned by the type <code class=\"language-text\">NextChip</code>.\nIn all the other cases, the game is in a state where no more empty cells are available and nobody won: the game is\nin a <code class=\"language-text\">draw</code> state.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>Row <span class=\"token keyword\">extends</span> Connect4Cell<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        Row <span class=\"token keyword\">extends</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">infer</span> Current<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token keyword\">infer</span> Others <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Connect4Cell</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n                <span class=\"token operator\">?</span> Current <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Connect4EmptyCell</span>\n                        <span class=\"token operator\">?</span> <span class=\"token boolean\">true</span>\n                        <span class=\"token operator\">:</span> AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>Others<span class=\"token operator\">></span>\n                <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">AreThereEmptyCells<span class=\"token operator\">&lt;</span>CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span>\n        AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span>\n        AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span>\n        AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span>\n        AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span>\n        AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">UpdateState<span class=\"token operator\">&lt;</span>UpdatedBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token punctuation\">,</span> CurrentChip <span class=\"token keyword\">extends</span> Connect4Chips<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        IsSomeoneWinning<span class=\"token operator\">&lt;</span>UpdatedBoard<span class=\"token operator\">></span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">never</span></span>\n                <span class=\"token operator\">?</span> AreThereEmptyCells<span class=\"token operator\">&lt;</span>UpdatedBoard<span class=\"token operator\">></span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token boolean\">true</span></span>\n                        <span class=\"token operator\">?</span> NextChip<span class=\"token operator\">&lt;</span>CurrentChip<span class=\"token operator\">></span>\n                        <span class=\"token operator\">:</span> <span class=\"token string\">'Draw'</span>\n                <span class=\"token operator\">:</span> IsSomeoneWinning<span class=\"token operator\">&lt;</span>UpdatedBoard<span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Below, you can find the full solution and the test cases we saw before to verify its correctness.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Connect4Chips</span> <span class=\"token operator\">=</span> <span class=\"token string\">'游댮'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Connect4EmptyCell</span> <span class=\"token operator\">=</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Connect4Cell</span> <span class=\"token operator\">=</span> Connect4Chips <span class=\"token operator\">|</span> Connect4EmptyCell<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Connect4State</span> <span class=\"token operator\">=</span> <span class=\"token string\">'游댮'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'游리'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'游댮 Won'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'游리 Won'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'Draw'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Connect4Board</span> <span class=\"token operator\">=</span> Connect4Cell<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Connect4Game</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  board<span class=\"token operator\">:</span> Connect4Board<span class=\"token punctuation\">;</span>\n  state<span class=\"token operator\">:</span> Connect4State<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">EmptyBoard</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"  \"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NewGame</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  board<span class=\"token operator\">:</span> EmptyBoard<span class=\"token punctuation\">;</span>\n  state<span class=\"token operator\">:</span> <span class=\"token string\">\"游리\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// board </span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ToInt<span class=\"token operator\">&lt;</span>StringToBeConverted<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> StringToBeConverted <span class=\"token keyword\">extends</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">infer</span> StringContent <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">number</span></span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span> \n  <span class=\"token operator\">?</span> StringContent \n  <span class=\"token operator\">:</span> <span class=\"token builtin\">never</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">RowStatusFor<span class=\"token operator\">&lt;</span>Column <span class=\"token keyword\">extends</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span>Row <span class=\"token keyword\">in</span> <span class=\"token keyword\">keyof</span> CurrentBoard<span class=\"token punctuation\">]</span>\n    <span class=\"token operator\">:</span> CurrentBoard<span class=\"token punctuation\">[</span>Row<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>Column<span class=\"token punctuation\">]</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Connect4EmptyCell</span> \n      <span class=\"token operator\">?</span> ToInt<span class=\"token operator\">&lt;</span>Row<span class=\"token operator\">></span> \n      <span class=\"token operator\">:</span> CurrentBoard<span class=\"token punctuation\">[</span>Row<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>Column<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">FindLastRowNotOccupied<span class=\"token operator\">&lt;</span>\n  ColumStatus <span class=\"token keyword\">extends</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> Connect4Cell<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  LastFreeCell <span class=\"token keyword\">extends</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">never</span>\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        ColumStatus <span class=\"token keyword\">extends</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token keyword\">infer</span> CurrentCellStatus <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">number</span></span><span class=\"token punctuation\">,</span> \n          <span class=\"token operator\">...</span><span class=\"token keyword\">infer</span> OtherCellsStatuses <span class=\"token keyword\">extends</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> Connect4Chips<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">]</span>\n          <span class=\"token operator\">?</span> FindLastRowNotOccupied<span class=\"token operator\">&lt;</span>OtherCellsStatuses<span class=\"token punctuation\">,</span> CurrentCellStatus<span class=\"token operator\">></span>\n          <span class=\"token operator\">:</span> LastFreeCell<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">FindRowPosition<span class=\"token operator\">&lt;</span>\n  CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token punctuation\">,</span> \n  Column <span class=\"token keyword\">extends</span> <span class=\"token builtin\">number</span>\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> FindLastRowNotOccupied<span class=\"token operator\">&lt;</span>RowStatusFor<span class=\"token operator\">&lt;</span>Column<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">PositionOnBoard<span class=\"token operator\">&lt;</span>\n  CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token punctuation\">,</span> \n  Column <span class=\"token keyword\">extends</span> <span class=\"token builtin\">number</span>\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>FindRowPosition<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">,</span> Column<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> Column<span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">UpdateColumn<span class=\"token operator\">&lt;</span>\n  Row <span class=\"token keyword\">extends</span> Connect4Cell<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  NextChip <span class=\"token keyword\">extends</span> Connect4Chips<span class=\"token punctuation\">,</span> ColumnPosition <span class=\"token keyword\">extends</span> <span class=\"token builtin\">number</span>\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span>Index <span class=\"token keyword\">in</span> <span class=\"token keyword\">keyof</span> Row<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span>\n    Index <span class=\"token keyword\">extends</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>ColumnPosition<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token operator\">?</span> Row<span class=\"token punctuation\">[</span>Index<span class=\"token punctuation\">]</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Connect4Cell</span>\n                  <span class=\"token operator\">?</span> NextChip\n                  <span class=\"token operator\">:</span> Row<span class=\"token punctuation\">[</span>Index<span class=\"token punctuation\">]</span>\n          <span class=\"token operator\">:</span> Row<span class=\"token punctuation\">[</span>Index<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">UpdateBoard<span class=\"token operator\">&lt;</span>\n  CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token punctuation\">,</span> \n  NextMovePosition <span class=\"token keyword\">extends</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> NextChip <span class=\"token keyword\">extends</span> Connect4Chips\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        NextMovePosition <span class=\"token keyword\">extends</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span>\n                <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">{</span>\n                  <span class=\"token punctuation\">[</span>Index <span class=\"token keyword\">in</span> <span class=\"token keyword\">keyof</span> CurrentBoard<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span>\n                  Index <span class=\"token keyword\">extends</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>NextMovePosition<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n                          <span class=\"token operator\">?</span> UpdateColumn<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">[</span>Index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> NextChip<span class=\"token punctuation\">,</span> NextMovePosition<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span>\n                          <span class=\"token operator\">:</span> CurrentBoard<span class=\"token punctuation\">[</span>Index<span class=\"token punctuation\">]</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n                <span class=\"token operator\">:</span> CurrentBoard<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// state</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">NextChip<span class=\"token operator\">&lt;</span>CurrentState <span class=\"token keyword\">extends</span> Connect4Chips<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        CurrentState <span class=\"token keyword\">extends</span> <span class=\"token string\">'游댮'</span>\n                <span class=\"token operator\">?</span> <span class=\"token string\">'游리'</span>\n                <span class=\"token operator\">:</span> <span class=\"token string\">'游댮'</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>\n  Chip <span class=\"token keyword\">extends</span> Connect4Chips<span class=\"token punctuation\">,</span> Row <span class=\"token keyword\">extends</span> Connect4Cell<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n  CurrentCountOfChip <span class=\"token keyword\">extends</span> Chip<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        CurrentCountOfChip<span class=\"token punctuation\">[</span><span class=\"token string\">'length'</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">extends</span> <span class=\"token number\">4</span>\n                <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>Chip<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> Won</span><span class=\"token template-punctuation string\">`</span></span>\n                <span class=\"token operator\">:</span> Row <span class=\"token keyword\">extends</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">infer</span> CurrentChip <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Connect4Cell</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token keyword\">infer</span> OtherChips <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Connect4Cell</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n                        <span class=\"token operator\">?</span> CurrentChip <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Chip</span>\n                                <span class=\"token operator\">?</span> SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> OtherChips<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>CurrentCountOfChip<span class=\"token punctuation\">,</span> CurrentChip<span class=\"token punctuation\">]</span><span class=\"token operator\">></span>\n                                <span class=\"token operator\">:</span> SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> OtherChips<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span>\n                        <span class=\"token operator\">:</span> <span class=\"token builtin\">never</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ExtractColumn<span class=\"token operator\">&lt;</span>ColumnIndex <span class=\"token keyword\">extends</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">[</span>Index <span class=\"token keyword\">in</span> <span class=\"token keyword\">keyof</span> CurrentBoard<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> CurrentBoard<span class=\"token punctuation\">[</span>Index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>ColumnIndex<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ColumnWinningFor<span class=\"token operator\">&lt;</span>\n  Chip <span class=\"token keyword\">extends</span> Connect4Chips<span class=\"token punctuation\">,</span> \n  ColumnIndex <span class=\"token keyword\">extends</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> \n  CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> ExtractColumn<span class=\"token operator\">&lt;</span>ColumnIndex<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">>></span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">IsWinning<span class=\"token operator\">&lt;</span>Chip <span class=\"token keyword\">extends</span> Connect4Chips<span class=\"token punctuation\">,</span> CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        ColumnWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        ColumnWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        ColumnWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        ColumnWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        ColumnWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        ColumnWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        ColumnWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">|</span>\n        SequentialElementsWinningFor<span class=\"token operator\">&lt;</span>Chip<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">IsSomeoneWinning<span class=\"token operator\">&lt;</span>\n  CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board\n<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span> IsWinning<span class=\"token operator\">&lt;</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span>CurrentBoard<span class=\"token operator\">></span> <span class=\"token operator\">|</span> IsWinning<span class=\"token operator\">&lt;</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span>CurrentBoard<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>Row <span class=\"token keyword\">extends</span> Connect4Cell<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        Row <span class=\"token keyword\">extends</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">infer</span> Current<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token keyword\">infer</span> Others <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Connect4Cell</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n                <span class=\"token operator\">?</span> Current <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Connect4EmptyCell</span>\n                        <span class=\"token operator\">?</span> <span class=\"token boolean\">true</span>\n                        <span class=\"token operator\">:</span> AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>Others<span class=\"token operator\">></span>\n                <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">AreThereEmptyCells<span class=\"token operator\">&lt;</span>CurrentBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span>\n        AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span>\n        AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span>\n        AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span>\n        AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span>\n        AreThereEmptyCellsOnRow<span class=\"token operator\">&lt;</span>CurrentBoard<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">UpdateState<span class=\"token operator\">&lt;</span>UpdatedBoard <span class=\"token keyword\">extends</span> Connect4Board<span class=\"token punctuation\">,</span> CurrentChip <span class=\"token keyword\">extends</span> Connect4Chips<span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        IsSomeoneWinning<span class=\"token operator\">&lt;</span>UpdatedBoard<span class=\"token operator\">></span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">never</span></span>\n                <span class=\"token operator\">?</span> AreThereEmptyCells<span class=\"token operator\">&lt;</span>UpdatedBoard<span class=\"token operator\">></span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token boolean\">true</span></span>\n                        <span class=\"token operator\">?</span> NextChip<span class=\"token operator\">&lt;</span>CurrentChip<span class=\"token operator\">></span>\n                        <span class=\"token operator\">:</span> <span class=\"token string\">'Draw'</span>\n                <span class=\"token operator\">:</span> IsSomeoneWinning<span class=\"token operator\">&lt;</span>UpdatedBoard<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// game</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Connect4<span class=\"token operator\">&lt;</span>CurrentGame <span class=\"token keyword\">extends</span> Connect4Game<span class=\"token punctuation\">,</span> NextMove <span class=\"token keyword\">extends</span> <span class=\"token builtin\">number</span><span class=\"token operator\">></span></span> <span class=\"token operator\">=</span>\n        CurrentGame<span class=\"token punctuation\">[</span><span class=\"token string\">'state'</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Connect4Chips</span>\n                <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n                  board<span class=\"token operator\">:</span> UpdateBoard<span class=\"token operator\">&lt;</span>\n                    CurrentGame<span class=\"token punctuation\">[</span><span class=\"token string\">'board'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n                    PositionOnBoard<span class=\"token operator\">&lt;</span>CurrentGame<span class=\"token punctuation\">[</span><span class=\"token string\">'board'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> NextMove<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> \n                    CurrentGame<span class=\"token punctuation\">[</span><span class=\"token string\">'state'</span><span class=\"token punctuation\">]</span>\n                  <span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n                  state<span class=\"token operator\">:</span> UpdateState<span class=\"token operator\">&lt;</span>\n                    UpdateBoard<span class=\"token operator\">&lt;</span>CurrentGame<span class=\"token punctuation\">[</span><span class=\"token string\">'board'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n                      PositionOnBoard<span class=\"token operator\">&lt;</span>CurrentGame<span class=\"token punctuation\">[</span><span class=\"token string\">'board'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> NextMove<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n                      CurrentGame<span class=\"token punctuation\">[</span><span class=\"token string\">'state'</span><span class=\"token punctuation\">]</span>\n                    <span class=\"token operator\">></span><span class=\"token punctuation\">,</span> \n                    CurrentGame<span class=\"token punctuation\">[</span><span class=\"token string\">'state'</span><span class=\"token punctuation\">]</span>\n                  <span class=\"token operator\">></span>\n                <span class=\"token punctuation\">}</span>\n                <span class=\"token operator\">:</span> CurrentGame<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ---- TEST CASES -----</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_move1_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>NewGame<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_move1_expected = {\n  board: [\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n  ];\n  state: \"游댮\";\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_move2_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>test_move1_actual<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_move2_expected = {\n  board: [\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游댮\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n  ];\n  state: \"游리\";\n};\n */</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_move3_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>test_move2_actual<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_move3_expected = {\n  board: [\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游댮\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n  ];\n  state: \"游댮\";\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_move4_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>test_move3_actual<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_move4_expected = {\n  board: [\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游댮\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"游댮\", \"  \", \"  \", \"  \", \"  \", \"  \"],\n  ];\n  state: \"游리\";\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_move5_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>test_move4_actual<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_move5_expected = {\n  board: [\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游댮\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"游댮\", \"游리\", \"  \", \"  \", \"  \", \"  \"],\n  ];\n  state: \"游댮\";\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_move6_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>test_move5_actual<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_move6_expected = {\n  board: [\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"  \", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"  \", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游댮\", \"游댮\", \"  \", \"  \", \"  \", \"  \", \"  \"],\n    [\"游리\", \"游댮\", \"游리\", \"  \", \"  \", \"  \", \"  \"],\n  ];\n  state: \"游리\";\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_red_win_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>\n  <span class=\"token punctuation\">{</span>\n    board<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    state<span class=\"token operator\">:</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">3</span>\n<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_red_win_expected = {\n  board: [\n    ['  ', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['  ', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['游리', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['游리', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['游댮', '游댮', '游댮', '游댮', '  ', '  ', '  '],\n    ['游리', '游댮', '游리', '游리', '  ', '  ', '  ']\n  ];\n  state: '游댮 Won';\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_yellow_win_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>\n  <span class=\"token punctuation\">{</span>\n    board<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    state<span class=\"token operator\">:</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">1</span>\n<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_yellow_win_expected = {\n  board: [\n    ['  ', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['  ', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['游댮', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['游리', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['游댮', '  ', '游댮', '游댮', '  ', '  ', '  '],\n    ['游리', '游리', '游리', '游리', '  ', '  ', '  ']\n  ];\n  state: '游리 Won';\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_diagonal_yellow_win_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>\n  <span class=\"token punctuation\">{</span>\n    board<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    state<span class=\"token operator\">:</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">3</span>\n<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_diagonal_yellow_win_expected = {\n  board: [\n    ['  ', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['  ', '  ', '  ', '  ', '  ', '  ', '  '],\n    ['  ', '  ', '  ', '游리', '  ', '  ', '  '],\n    ['  ', '  ', '游리', '游댮', '  ', '  ', '  '],\n    ['游댮', '游리', '游댮', '游댮', '  ', '  ', '  '],\n    ['游리', '游댮', '游리', '游리', '  ', '  ', '  ']\n  ];\n  state: '游리 Won';\n};\n*/</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">test_draw_actual</span> <span class=\"token operator\">=</span> Connect4<span class=\"token operator\">&lt;</span>\n  <span class=\"token punctuation\">{</span>\n    board<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'  '</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span><span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'游댮'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    state<span class=\"token operator\">:</span> <span class=\"token string\">'游리'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">6</span>\n<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/*\ntype test_draw_expected = {\n  board: [\n    ['游리', '游댮', '游댮', '游리', '游리', '游댮', '游리'],\n    ['游댮', '游리', '游리', '游댮', '游댮', '游리', '游댮'],\n    ['游리', '游댮', '游댮', '游리', '游리', '游댮', '游리'],\n    ['游댮', '游리', '游리', '游댮', '游댮', '游리', '游댮'],\n    ['游리', '游댮', '游댮', '游리', '游리', '游댮', '游리'],\n    ['游댮', '游리', '游리', '游댮', '游댮', '游리', '游댮']\n  ];\n  state: 'Draw';\n};\n*/</span></code></pre></div>\n<h4>Conclusion</h4>\n<p>As I mentioned at the beginning, this is the third of the four challenges I liked the most from \"Advent Of TypeScript\n2023\" by <a href=\"https://typehero.dev\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">TypeHero</a>. Check out the other challenges I liked <a href=\"/2023/12/29/advent-of-typescript-2023-favourite-challenges/\" title=\"advent of typescript 2023 challenges\">here</a>.</p>"}